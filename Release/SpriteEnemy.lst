                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module SpriteEnemy
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _Destroy_SpriteEnemy
                             12 	.globl _Update_SpriteEnemy
                             13 	.globl _Start_SpriteEnemy
                             14 	.globl _PlayFx
                             15 	.globl _SpriteManagerRemoveSprite
                             16 	.globl _CheckCollision
                             17 	.globl _TranslateSprite
                             18 	.globl _SetSpriteAnim
                             19 	.globl _empty
                             20 	.globl _bank_SpriteEnemy
                             21 	.globl _attack_wait
                             22 	.globl _damage_cooldown
                             23 	.globl _enemy_dead
                             24 	.globl _enemy_hit
                             25 	.globl _enemy_walk
                             26 	.globl _enemy_idle
                             27 	.globl _CheckCollisionETile
                             28 	.globl _ETurn
                             29 ;--------------------------------------------------------
                             30 ; special function registers
                             31 ;--------------------------------------------------------
                             32 ;--------------------------------------------------------
                             33 ; ram data
                             34 ;--------------------------------------------------------
                             35 	.area _DATA
   0000                      36 _damage_cooldown::
   0000                      37 	.ds 1
   0001                      38 _attack_wait::
   0001                      39 	.ds 1
                             40 ;--------------------------------------------------------
                             41 ; CODE rom data
                             42 ;--------------------------------------------------------
                             43 	.area _CODE
   0000                      44 _bank_SpriteEnemy:
   0000 02                   45 	.db #0x02	; 2
                             46 ;--------------------------------------------------------
                             47 ; absolute external ram data
                             48 ;--------------------------------------------------------
                             49 	.area _DABS (ABS)
                             50 ;--------------------------------------------------------
                             51 ; global & static initialisations
                             52 ;--------------------------------------------------------
                             53 	.area _HOME
                             54 	.area _GSINIT
                             55 	.area _GSFINAL
                             56 	.area _GSINIT
                             57 ;custom_datas.h:44: UINT8 damage_cooldown = 30u;
   0000 21r00r00             58 	ld	hl, #_damage_cooldown
   0003 36 1E                59 	ld	(hl), #0x1e
                             60 ;custom_datas.h:45: UINT8 attack_wait = 32u;
   0005 21r01r00             61 	ld	hl, #_attack_wait
   0008 36 20                62 	ld	(hl), #0x20
                             63 ;--------------------------------------------------------
                             64 ; Home
                             65 ;--------------------------------------------------------
                             66 	.area _HOME
                             67 ;C:/GB/ZGB/common/include/Banks/SetBankCommon.h:4: void empty(void) __nonbanked {}
                             68 ;	---------------------------------
                             69 ; Function empty
                             70 ; ---------------------------------
   0000                      71 _empty::
   0000 C9                   72 	ret
                             73 	.area _HOME
                             74 ;--------------------------------------------------------
                             75 ; code
                             76 ;--------------------------------------------------------
                             77 	.area _CODE_2
                             78 ;SpriteEnemy.c:20: void Start_SpriteEnemy() {
                             79 ;	---------------------------------
                             80 ; Function Start_SpriteEnemy
                             81 ; ---------------------------------
   0000                      82 _Start_SpriteEnemy::
   0000 E8 FE                83 	add	sp, #-2
                             84 ;SpriteEnemy.c:22: THIS->coll_x = 2;
   0002 21r01r00             85 	ld	hl, #_THIS + 1
   0005 2B                   86 	dec	hl
   0006 4E                   87 	ld	c, (hl)
   0007 23                   88 	inc	hl
   0008 46                   89 	ld	b, (hl)
   0009 21 0D 00             90 	ld	hl, #0x000d
   000C 09                   91 	add	hl, bc
   000D 4D                   92 	ld	c,l
   000E 7C                   93 	ld	a,h
   000F 36 02                94 	ld	(hl), #0x02
                             95 ;SpriteEnemy.c:23: THIS->coll_y = 0;
   0011 21r01r00             96 	ld	hl, #_THIS + 1
   0014 2B                   97 	dec	hl
   0015 4E                   98 	ld	c, (hl)
   0016 23                   99 	inc	hl
   0017 46                  100 	ld	b, (hl)
   0018 21 0E 00            101 	ld	hl, #0x000e
   001B 09                  102 	add	hl, bc
   001C 4D                  103 	ld	c, l
   001D 44                  104 	ld	b, h
   001E AF                  105 	xor	a, a
   001F 02                  106 	ld	(bc), a
                            107 ;SpriteEnemy.c:24: THIS->coll_w = 12;
   0020 21r01r00            108 	ld	hl, #_THIS + 1
   0023 2B                  109 	dec	hl
   0024 4E                  110 	ld	c, (hl)
   0025 23                  111 	inc	hl
   0026 46                  112 	ld	b, (hl)
   0027 21 0F 00            113 	ld	hl, #0x000f
   002A 09                  114 	add	hl, bc
   002B 4D                  115 	ld	c,l
   002C 7C                  116 	ld	a,h
   002D 36 0C               117 	ld	(hl), #0x0c
                            118 ;SpriteEnemy.c:25: THIS->coll_h = 16;
   002F 21r01r00            119 	ld	hl, #_THIS + 1
   0032 2B                  120 	dec	hl
   0033 4E                  121 	ld	c, (hl)
   0034 23                  122 	inc	hl
   0035 46                  123 	ld	b, (hl)
   0036 21 10 00            124 	ld	hl, #0x0010
   0039 09                  125 	add	hl, bc
   003A 4D                  126 	ld	c,l
   003B 7C                  127 	ld	a,h
   003C 36 10               128 	ld	(hl), #0x10
                            129 ;SpriteEnemy.c:26: THIS->lim_x = 255u;
   003E 21r00r00            130 	ld	hl, #_THIS
   0041 46                  131 	ld	b, (hl)
   0042 23                  132 	inc	hl
   0043 4E                  133 	ld	c, (hl)
   0044 78                  134 	ld	a, b
   0045 C6 13               135 	add	a, #0x13
   0047 47                  136 	ld	b, a
   0048 30 01               137 	jr	NC,00103$
   004A 0C                  138 	inc	c
   004B                     139 00103$:
   004B 68                  140 	ld	l, b
   004C 61                  141 	ld	h, c
   004D 36 FF               142 	ld	(hl), #0xff
   004F 23                  143 	inc	hl
   0050 36 00               144 	ld	(hl), #0x00
                            145 ;SpriteEnemy.c:27: THIS->lim_y = 244u;
   0052 21r00r00            146 	ld	hl, #_THIS
   0055 46                  147 	ld	b, (hl)
   0056 23                  148 	inc	hl
   0057 4E                  149 	ld	c, (hl)
   0058 78                  150 	ld	a, b
   0059 C6 15               151 	add	a, #0x15
   005B 47                  152 	ld	b, a
   005C 30 01               153 	jr	NC,00104$
   005E 0C                  154 	inc	c
   005F                     155 00104$:
   005F 68                  156 	ld	l, b
   0060 61                  157 	ld	h, c
   0061 36 F4               158 	ld	(hl), #0xf4
   0063 23                  159 	inc	hl
   0064 36 00               160 	ld	(hl), #0x00
                            161 ;SpriteEnemy.c:28: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;	
   0066 21r01r00            162 	ld	hl, #_THIS + 1
   0069 2B                  163 	dec	hl
   006A 4E                  164 	ld	c, (hl)
   006B 23                  165 	inc	hl
   006C 46                  166 	ld	b, (hl)
   006D 21 19 00            167 	ld	hl, #0x0019
   0070 09                  168 	add	hl, bc
   0071 4D                  169 	ld	c, l
   0072 7C                  170 	ld	a, h
   0073 47                  171 	ld	b, a
                            172 ;SpriteEnemy.c:29: SetSpriteAnim(THIS, enemy_idle, 8u);
   0074 C5                  173 	push	bc
   0075 3E 08               174 	ld	a, #0x08
   0077 F5                  175 	push	af
   0078 33                  176 	inc	sp
   0079 21rC4r00            177 	ld	hl, #_enemy_idle
   007C E5                  178 	push	hl
   007D 21r00r00            179 	ld	hl, #_THIS
   0080 2A                  180 	ld	a, (hl+)
   0081 66                  181 	ld	h, (hl)
   0082 6F                  182 	ld	l, a
   0083 E5                  183 	push	hl
   0084 CDr00r00            184 	call	_SetSpriteAnim
   0087 E8 05               185 	add	sp, #5
   0089 C1                  186 	pop	bc
                            187 ;SpriteEnemy.c:30: data->enemy_accel_y = 24;
   008A 69                  188 	ld	l, c
   008B 60                  189 	ld	h, b
   008C 36 18               190 	ld	(hl), #0x18
   008E 23                  191 	inc	hl
   008F 36 00               192 	ld	(hl), #0x00
                            193 ;SpriteEnemy.c:31: data->vx = 1;
   0091 21 04 00            194 	ld	hl, #0x0004
   0094 09                  195 	add	hl, bc
   0095 33                  196 	inc	sp
   0096 33                  197 	inc	sp
   0097 E5                  198 	push	hl
   0098 E1                  199 	pop	hl
   0099 E5                  200 	push	hl
   009A 36 01               201 	ld	(hl), #0x01
                            202 ;SpriteEnemy.c:32: data->wait = 0u;
   009C 21 05 00            203 	ld	hl, #0x0005
   009F 09                  204 	add	hl, bc
   00A0 33                  205 	inc	sp
   00A1 33                  206 	inc	sp
   00A2 E5                  207 	push	hl
   00A3 E1                  208 	pop	hl
   00A4 E5                  209 	push	hl
   00A5 36 00               210 	ld	(hl), #0x00
                            211 ;SpriteEnemy.c:33: data->enemydamage = 5u;
   00A7 21 06 00            212 	ld	hl, #0x0006
   00AA 09                  213 	add	hl, bc
   00AB 33                  214 	inc	sp
   00AC 33                  215 	inc	sp
   00AD E5                  216 	push	hl
   00AE E1                  217 	pop	hl
   00AF E5                  218 	push	hl
   00B0 36 05               219 	ld	(hl), #0x05
                            220 ;SpriteEnemy.c:34: data->hp = 45u;
   00B2 21 07 00            221 	ld	hl, #0x0007
   00B5 09                  222 	add	hl, bc
   00B6 33                  223 	inc	sp
   00B7 33                  224 	inc	sp
   00B8 E5                  225 	push	hl
   00B9 E1                  226 	pop	hl
   00BA E5                  227 	push	hl
   00BB 36 2D               228 	ld	(hl), #0x2d
                            229 ;SpriteEnemy.c:35: data->enemy_state = ENEMY_STATE_NORMAL;
   00BD 03                  230 	inc	bc
   00BE 03                  231 	inc	bc
   00BF AF                  232 	xor	a, a
   00C0 02                  233 	ld	(bc), a
                            234 ;SpriteEnemy.c:36: }
   00C1 E8 02               235 	add	sp, #2
   00C3 C9                  236 	ret
   00C4                     237 _enemy_idle:
   00C4 01                  238 	.db #0x01	; 1
   00C5 00                  239 	.db #0x00	; 0
   00C6                     240 _enemy_walk:
   00C6 02                  241 	.db #0x02	; 2
   00C7 00                  242 	.db #0x00	; 0
   00C8 01                  243 	.db #0x01	; 1
   00C9                     244 _enemy_hit:
   00C9 03                  245 	.db #0x03	; 3
   00CA 02                  246 	.db #0x02	; 2
   00CB 03                  247 	.db #0x03	; 3
   00CC 04                  248 	.db #0x04	; 4
   00CD                     249 _enemy_dead:
   00CD 01                  250 	.db #0x01	; 1
   00CE 05                  251 	.db #0x05	; 5
                            252 ;SpriteEnemy.c:38: void Update_SpriteEnemy() {
                            253 ;	---------------------------------
                            254 ; Function Update_SpriteEnemy
                            255 ; ---------------------------------
   00CF                     256 _Update_SpriteEnemy::
   00CF E8 EF               257 	add	sp, #-17
                            258 ;SpriteEnemy.c:40: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   00D1 21r00r00            259 	ld	hl, #_THIS
   00D4 2A                  260 	ld	a, (hl+)
   00D5 5E                  261 	ld	e, (hl)
   00D6 F8 0E               262 	ldhl	sp,	#14
   00D8 22                  263 	ld	(hl+), a
   00D9 73                  264 	ld	(hl), e
   00DA 2B                  265 	dec	hl
   00DB 5E                  266 	ld	e, (hl)
   00DC 23                  267 	inc	hl
   00DD 56                  268 	ld	d, (hl)
   00DE 21 19 00            269 	ld	hl, #0x0019
   00E1 19                  270 	add	hl, de
   00E2 4D                  271 	ld	c, l
   00E3 44                  272 	ld	b, h
   00E4 33                  273 	inc	sp
   00E5 33                  274 	inc	sp
   00E6 C5                  275 	push	bc
                            276 ;SpriteEnemy.c:42: if (data->enemy_state == ENEMY_STATE_DEAD){
   00E7 D1                  277 	pop	de
   00E8 D5                  278 	push	de
   00E9 21 02 00            279 	ld	hl, #0x0002
   00EC 19                  280 	add	hl, de
   00ED 7D                  281 	ld	a, l
   00EE 54                  282 	ld	d, h
   00EF F8 02               283 	ldhl	sp,	#2
   00F1 22                  284 	ld	(hl+), a
   00F2 72                  285 	ld	(hl), d
   00F3 2B                  286 	dec	hl
   00F4 5E                  287 	ld	e, (hl)
   00F5 23                  288 	inc	hl
   00F6 56                  289 	ld	d, (hl)
   00F7 1A                  290 	ld	a,(de)
   00F8 4F                  291 	ld	c, a
                            292 ;SpriteEnemy.c:43: if (data->wait > 0){
   00F9 D1                  293 	pop	de
   00FA D5                  294 	push	de
   00FB 21 05 00            295 	ld	hl, #0x0005
   00FE 19                  296 	add	hl, de
   00FF 7D                  297 	ld	a, l
   0100 54                  298 	ld	d, h
   0101 F8 04               299 	ldhl	sp,	#4
   0103 22                  300 	ld	(hl+), a
   0104 72                  301 	ld	(hl), d
   0105 2B                  302 	dec	hl
   0106 5E                  303 	ld	e, (hl)
   0107 23                  304 	inc	hl
   0108 56                  305 	ld	d, (hl)
   0109 1A                  306 	ld	a,(de)
   010A F8 10               307 	ldhl	sp,	#16
   010C 77                  308 	ld	(hl), a
                            309 ;SpriteEnemy.c:42: if (data->enemy_state == ENEMY_STATE_DEAD){
   010D 79                  310 	ld	a, c
   010E D6 03               311 	sub	a, #0x03
   0110 C2r78r01            312 	jp	NZ,00105$
                            313 ;SpriteEnemy.c:44: THIS->y--;
   0113 2B                  314 	dec	hl
   0114 2B                  315 	dec	hl
   0115 5E                  316 	ld	e, (hl)
   0116 23                  317 	inc	hl
   0117 56                  318 	ld	d, (hl)
   0118 21 0A 00            319 	ld	hl, #0x000a
   011B 19                  320 	add	hl, de
   011C 7D                  321 	ld	a, l
   011D 54                  322 	ld	d, h
   011E F8 0C               323 	ldhl	sp,	#12
   0120 22                  324 	ld	(hl+), a
   0121 72                  325 	ld	(hl), d
   0122 2B                  326 	dec	hl
   0123 5E                  327 	ld	e, (hl)
   0124 23                  328 	inc	hl
   0125 56                  329 	ld	d, (hl)
   0126 1A                  330 	ld	a,(de)
   0127 4F                  331 	ld	c, a
   0128 13                  332 	inc	de
   0129 1A                  333 	ld	a,(de)
   012A 47                  334 	ld	b, a
                            335 ;SpriteEnemy.c:43: if (data->wait > 0){
   012B F8 10               336 	ldhl	sp,	#16
   012D 7E                  337 	ld	a, (hl)
   012E B7                  338 	or	a, a
   012F 28 19               339 	jr	Z,00102$
                            340 ;SpriteEnemy.c:44: THIS->y--;
   0131 0B                  341 	dec	bc
   0132 F8 0C               342 	ldhl	sp,	#12
   0134 2A                  343 	ld	a, (hl+)
   0135 66                  344 	ld	h, (hl)
   0136 6F                  345 	ld	l, a
   0137 71                  346 	ld	(hl), c
   0138 23                  347 	inc	hl
   0139 70                  348 	ld	(hl), b
                            349 ;SpriteEnemy.c:45: data->wait--;
   013A F8 04               350 	ldhl	sp,#(5 - 1)
   013C 5E                  351 	ld	e, (hl)
   013D 23                  352 	inc	hl
   013E 56                  353 	ld	d, (hl)
   013F 1A                  354 	ld	a,(de)
   0140 4F                  355 	ld	c, a
   0141 0D                  356 	dec	c
   0142 2B                  357 	dec	hl
   0143 2A                  358 	ld	a, (hl+)
   0144 66                  359 	ld	h, (hl)
   0145 6F                  360 	ld	l, a
   0146 71                  361 	ld	(hl), c
   0147 C3r4Dr05            362 	jp	00145$
   014A                     363 00102$:
                            364 ;SpriteEnemy.c:47: THIS->y++;	
   014A 03                  365 	inc	bc
   014B F8 0C               366 	ldhl	sp,	#12
   014D 2A                  367 	ld	a, (hl+)
   014E 66                  368 	ld	h, (hl)
   014F 6F                  369 	ld	l, a
   0150 71                  370 	ld	(hl), c
   0151 23                  371 	inc	hl
   0152 70                  372 	ld	(hl), b
                            373 ;SpriteEnemy.c:48: THIS->y++;
   0153 21r01r00            374 	ld	hl, #_THIS + 1
   0156 2B                  375 	dec	hl
   0157 4E                  376 	ld	c, (hl)
   0158 23                  377 	inc	hl
   0159 46                  378 	ld	b, (hl)
   015A 21 0A 00            379 	ld	hl, #0x000a
   015D 09                  380 	add	hl, bc
   015E 7D                  381 	ld	a, l
   015F 54                  382 	ld	d, h
   0160 F8 0F               383 	ldhl	sp,	#15
   0162 22                  384 	ld	(hl+), a
   0163 72                  385 	ld	(hl), d
   0164 2B                  386 	dec	hl
   0165 5E                  387 	ld	e, (hl)
   0166 23                  388 	inc	hl
   0167 56                  389 	ld	d, (hl)
   0168 1A                  390 	ld	a,(de)
   0169 4F                  391 	ld	c, a
   016A 13                  392 	inc	de
   016B 1A                  393 	ld	a,(de)
   016C 47                  394 	ld	b, a
   016D 03                  395 	inc	bc
   016E 2B                  396 	dec	hl
   016F 2A                  397 	ld	a, (hl+)
   0170 66                  398 	ld	h, (hl)
   0171 6F                  399 	ld	l, a
   0172 71                  400 	ld	(hl), c
   0173 23                  401 	inc	hl
   0174 70                  402 	ld	(hl), b
                            403 ;SpriteEnemy.c:50: return;
   0175 C3r4Dr05            404 	jp	00145$
   0178                     405 00105$:
                            406 ;SpriteEnemy.c:62: data->tile_e_collision = TranslateSprite(THIS, data->vx << delta_time, (data->enemy_accel_y >> 4)<< delta_time);
   0178 D1                  407 	pop	de
   0179 D5                  408 	push	de
   017A 21 03 00            409 	ld	hl, #0x0003
   017D 19                  410 	add	hl, de
   017E 7D                  411 	ld	a, l
   017F 54                  412 	ld	d, h
   0180 F8 06               413 	ldhl	sp,	#6
   0182 22                  414 	ld	(hl+), a
   0183 72                  415 	ld	(hl), d
                            416 ;SpriteEnemy.c:53: if (data->wait > 0u){
   0184 F8 10               417 	ldhl	sp,	#16
   0186 7E                  418 	ld	a, (hl)
   0187 B7                  419 	or	a, a
   0188 28 24               420 	jr	Z,00120$
                            421 ;SpriteEnemy.c:54: data->wait -= 1u;
   018A 4E                  422 	ld	c, (hl)
   018B 0D                  423 	dec	c
   018C F8 04               424 	ldhl	sp,	#4
   018E 2A                  425 	ld	a, (hl+)
   018F 66                  426 	ld	h, (hl)
   0190 6F                  427 	ld	l, a
   0191 71                  428 	ld	(hl), c
                            429 ;SpriteEnemy.c:55: if (data->wait == 0u){
   0192 79                  430 	ld	a, c
   0193 B7                  431 	or	a, a
   0194 C2rDFr02            432 	jp	NZ, 00121$
                            433 ;SpriteEnemy.c:56: SetSpriteAnim(THIS, enemy_walk, 8u);
   0197 3E 08               434 	ld	a, #0x08
   0199 F5                  435 	push	af
   019A 33                  436 	inc	sp
   019B 21rC6r00            437 	ld	hl, #_enemy_walk
   019E E5                  438 	push	hl
   019F 21r00r00            439 	ld	hl, #_THIS
   01A2 2A                  440 	ld	a, (hl+)
   01A3 66                  441 	ld	h, (hl)
   01A4 6F                  442 	ld	l, a
   01A5 E5                  443 	push	hl
   01A6 CDr00r00            444 	call	_SetSpriteAnim
   01A9 E8 05               445 	add	sp, #5
   01AB C3rDFr02            446 	jp	00121$
   01AE                     447 00120$:
                            448 ;SpriteEnemy.c:59: if(data->enemy_accel_y < 24) {
   01AE D1                  449 	pop	de
   01AF D5                  450 	push	de
   01B0 1A                  451 	ld	a,(de)
   01B1 4F                  452 	ld	c, a
   01B2 13                  453 	inc	de
   01B3 1A                  454 	ld	a,(de)
   01B4 47                  455 	ld	b, a
   01B5 79                  456 	ld	a, c
   01B6 D6 18               457 	sub	a, #0x18
   01B8 78                  458 	ld	a, b
   01B9 17                  459 	rla
   01BA 3F                  460 	ccf
   01BB 1F                  461 	rra
   01BC DE 80               462 	sbc	a, #0x80
   01BE 30 06               463 	jr	NC,00109$
                            464 ;SpriteEnemy.c:60: data->enemy_accel_y += 1;
   01C0 03                  465 	inc	bc
   01C1 E1                  466 	pop	hl
   01C2 E5                  467 	push	hl
   01C3 71                  468 	ld	(hl), c
   01C4 23                  469 	inc	hl
   01C5 70                  470 	ld	(hl), b
   01C6                     471 00109$:
                            472 ;SpriteEnemy.c:62: data->tile_e_collision = TranslateSprite(THIS, data->vx << delta_time, (data->enemy_accel_y >> 4)<< delta_time);
   01C6 D1                  473 	pop	de
   01C7 D5                  474 	push	de
   01C8 1A                  475 	ld	a,(de)
   01C9 4F                  476 	ld	c, a
   01CA 13                  477 	inc	de
   01CB 1A                  478 	ld	a,(de)
   01CC 47                  479 	ld	b, a
   01CD CB 28               480 	sra	b
   01CF CB 19               481 	rr	c
   01D1 CB 28               482 	sra	b
   01D3 CB 19               483 	rr	c
   01D5 CB 28               484 	sra	b
   01D7 CB 19               485 	rr	c
   01D9 CB 28               486 	sra	b
   01DB CB 19               487 	rr	c
   01DD F8 10               488 	ldhl	sp,	#16
   01DF 71                  489 	ld	(hl), c
   01E0 E5                  490 	push	hl
   01E1 21r00r00            491 	ld	hl, #_delta_time
   01E4 7E                  492 	ld	a, (hl)
   01E5 F8 0F               493 	ldhl	sp,	#15
   01E7 77                  494 	ld	(hl), a
   01E8 E1                  495 	pop	hl
   01E9 F8 0D               496 	ldhl	sp,	#13
   01EB 7E                  497 	ld	a, (hl)
   01EC F5                  498 	push	af
   01ED F8 12               499 	ldhl	sp,	#18
   01EF 3A                  500 	ld	a, (hl-)
   01F0 2B                  501 	dec	hl
   01F1 77                  502 	ld	(hl), a
   01F2 F1                  503 	pop	af
   01F3 3C                  504 	inc	a
   01F4 18 04               505 	jr	00255$
   01F6                     506 00254$:
   01F6 F8 0E               507 	ldhl	sp,	#14
   01F8 CB 26               508 	sla	(hl)
   01FA                     509 00255$:
   01FA 3D                  510 	dec	a
   01FB 20 F9               511 	jr	NZ,00254$
   01FD D1                  512 	pop	de
   01FE D5                  513 	push	de
   01FF 21 04 00            514 	ld	hl, #0x0004
   0202 19                  515 	add	hl, de
   0203 7D                  516 	ld	a, l
   0204 54                  517 	ld	d, h
   0205 F8 0F               518 	ldhl	sp,	#15
   0207 22                  519 	ld	(hl+), a
   0208 72                  520 	ld	(hl), d
   0209 2B                  521 	dec	hl
   020A 5E                  522 	ld	e, (hl)
   020B 23                  523 	inc	hl
   020C 56                  524 	ld	d, (hl)
   020D 1A                  525 	ld	a,(de)
   020E 47                  526 	ld	b, a
   020F F8 0D               527 	ldhl	sp,	#13
   0211 7E                  528 	ld	a, (hl)
   0212 3C                  529 	inc	a
   0213 18 02               530 	jr	00257$
   0215                     531 00256$:
   0215 CB 20               532 	sla	b
   0217                     533 00257$:
   0217 3D                  534 	dec	a
   0218 20 FB               535 	jr	NZ,00256$
   021A 23                  536 	inc	hl
   021B 7E                  537 	ld	a, (hl)
   021C F5                  538 	push	af
   021D 33                  539 	inc	sp
   021E C5                  540 	push	bc
   021F 33                  541 	inc	sp
   0220 21r00r00            542 	ld	hl, #_THIS
   0223 2A                  543 	ld	a, (hl+)
   0224 66                  544 	ld	h, (hl)
   0225 6F                  545 	ld	l, a
   0226 E5                  546 	push	hl
   0227 CDr00r00            547 	call	_TranslateSprite
   022A E8 04               548 	add	sp, #4
   022C 7B                  549 	ld	a, e
   022D F8 06               550 	ldhl	sp,	#6
   022F F5                  551 	push	af
   0230 2A                  552 	ld	a, (hl+)
   0231 66                  553 	ld	h, (hl)
   0232 6F                  554 	ld	l, a
   0233 F1                  555 	pop	af
   0234 77                  556 	ld	(hl), a
                            557 ;SpriteEnemy.c:64: if(!data->tile_e_collision && delta_time != 0 && data->enemy_accel_y < 24) { //Do another iteration if there is no collision
   0235 B7                  558 	or	a, a
   0236 C2r90r02            559 	jp	NZ, 00111$
   0239 21r00r00            560 	ld	hl, #_delta_time
   023C 7E                  561 	ld	a, (hl)
   023D B7                  562 	or	a, a
   023E CAr90r02            563 	jp	Z, 00111$
                            564 ;SpriteEnemy.c:59: if(data->enemy_accel_y < 24) {
   0241 D1                  565 	pop	de
   0242 D5                  566 	push	de
   0243 1A                  567 	ld	a,(de)
   0244 4F                  568 	ld	c, a
   0245 13                  569 	inc	de
   0246 1A                  570 	ld	a,(de)
   0247 47                  571 	ld	b, a
                            572 ;SpriteEnemy.c:64: if(!data->tile_e_collision && delta_time != 0 && data->enemy_accel_y < 24) { //Do another iteration if there is no collision
   0248 79                  573 	ld	a, c
   0249 D6 18               574 	sub	a, #0x18
   024B 78                  575 	ld	a, b
   024C 17                  576 	rla
   024D 3F                  577 	ccf
   024E 1F                  578 	rra
   024F DE 80               579 	sbc	a, #0x80
   0251 D2r90r02            580 	jp	NC, 00111$
                            581 ;SpriteEnemy.c:65: data->enemy_accel_y += 2;
   0254 03                  582 	inc	bc
   0255 03                  583 	inc	bc
   0256 E1                  584 	pop	hl
   0257 E5                  585 	push	hl
   0258 71                  586 	ld	(hl), c
   0259 23                  587 	inc	hl
   025A 70                  588 	ld	(hl), b
                            589 ;SpriteEnemy.c:66: data->tile_e_collision = TranslateSprite(THIS, 0, (data->enemy_accel_y >> 4) << delta_time);
   025B CB 28               590 	sra	b
   025D CB 19               591 	rr	c
   025F CB 28               592 	sra	b
   0261 CB 19               593 	rr	c
   0263 CB 28               594 	sra	b
   0265 CB 19               595 	rr	c
   0267 CB 28               596 	sra	b
   0269 CB 19               597 	rr	c
   026B 21r00r00            598 	ld	hl, #_delta_time
   026E 7E                  599 	ld	a, (hl)
   026F 3C                  600 	inc	a
   0270 18 02               601 	jr	00259$
   0272                     602 00258$:
   0272 CB 21               603 	sla	c
   0274                     604 00259$:
   0274 3D                  605 	dec	a
   0275 20 FB               606 	jr	NZ,00258$
   0277 79                  607 	ld	a, c
   0278 F5                  608 	push	af
   0279 33                  609 	inc	sp
   027A AF                  610 	xor	a, a
   027B F5                  611 	push	af
   027C 33                  612 	inc	sp
   027D 21r00r00            613 	ld	hl, #_THIS
   0280 2A                  614 	ld	a, (hl+)
   0281 66                  615 	ld	h, (hl)
   0282 6F                  616 	ld	l, a
   0283 E5                  617 	push	hl
   0284 CDr00r00            618 	call	_TranslateSprite
   0287 E8 04               619 	add	sp, #4
   0289 4B                  620 	ld	c, e
   028A F8 06               621 	ldhl	sp,	#6
   028C 2A                  622 	ld	a, (hl+)
   028D 66                  623 	ld	h, (hl)
   028E 6F                  624 	ld	l, a
   028F 71                  625 	ld	(hl), c
   0290                     626 00111$:
                            627 ;SpriteEnemy.c:68: if(data->tile_e_collision) {
   0290 F8 06               628 	ldhl	sp,#(7 - 1)
   0292 5E                  629 	ld	e, (hl)
   0293 23                  630 	inc	hl
   0294 56                  631 	ld	d, (hl)
   0295 1A                  632 	ld	a,(de)
   0296 B7                  633 	or	a, a
   0297 CArDFr02            634 	jp	Z, 00121$
                            635 ;SpriteEnemy.c:69: if(data->enemy_state == ENEMY_STATE_JUMPING & data->enemy_accel_y > 0) {
   029A F8 02               636 	ldhl	sp,#(3 - 1)
   029C 5E                  637 	ld	e, (hl)
   029D 23                  638 	inc	hl
   029E 56                  639 	ld	d, (hl)
   029F 1A                  640 	ld	a,(de)
   02A0 3D                  641 	dec	a
   02A1 3E 01               642 	ld	a, #0x01
   02A3 28 01               643 	jr	Z,00261$
   02A5 AF                  644 	xor	a, a
   02A6                     645 00261$:
   02A6 F8 10               646 	ldhl	sp,	#16
   02A8 77                  647 	ld	(hl), a
   02A9 D1                  648 	pop	de
   02AA D5                  649 	push	de
   02AB 1A                  650 	ld	a,(de)
   02AC 4F                  651 	ld	c, a
   02AD 13                  652 	inc	de
   02AE 1A                  653 	ld	a,(de)
   02AF 47                  654 	ld	b,a
   02B0 5F                  655 	ld	e, a
   02B1 3E 00               656 	ld	a, #0x00
   02B3 57                  657 	ld	d, a
   02B4 AF                  658 	xor	a, a
   02B5 B9                  659 	cp	a, c
   02B6 98                  660 	sbc	a, b
   02B7 CB 7B               661 	bit	7, e
   02B9 28 07               662 	jr	Z,00262$
   02BB CB 7A               663 	bit	7, d
   02BD 20 08               664 	jr	NZ,00263$
   02BF BF                  665 	cp	a, a
   02C0 18 05               666 	jr	00263$
   02C2                     667 00262$:
   02C2 CB 7A               668 	bit	7, d
   02C4 28 01               669 	jr	Z,00263$
   02C6 37                  670 	scf
   02C7                     671 00263$:
   02C7 3E 00               672 	ld	a, #0x00
   02C9 17                  673 	rla
   02CA F8 10               674 	ldhl	sp,	#16
   02CC A6                  675 	and	a,(hl)
   02CD 28 08               676 	jr	Z,00115$
                            677 ;SpriteEnemy.c:70: data->enemy_state = ENEMY_STATE_NORMAL;
   02CF C1                  678 	pop	bc
   02D0 E1                  679 	pop	hl
   02D1 E5                  680 	push	hl
   02D2 C5                  681 	push	bc
   02D3 36 00               682 	ld	(hl), #0x00
   02D5 18 05               683 	jr	00116$
   02D7                     684 00115$:
                            685 ;SpriteEnemy.c:72: data->enemy_accel_y = 0;	
   02D7 E1                  686 	pop	hl
   02D8 E5                  687 	push	hl
   02D9 AF                  688 	xor	a, a
   02DA 22                  689 	ld	(hl+), a
   02DB 77                  690 	ld	(hl), a
   02DC                     691 00116$:
                            692 ;SpriteEnemy.c:74: CheckCollisionETile();
   02DC CDr50r05            693 	call	_CheckCollisionETile
   02DF                     694 00121$:
                            695 ;SpriteEnemy.c:82: SPRITEMANAGER_ITERATE(scroll_e_tile, iespr) {
   02DF FAr01r00            696 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   02E2 4F                  697 	ld	c, a
   02E3 06 00               698 	ld	b, #0x00
   02E5 CB 21               699 	sla	c
   02E7 CB 10               700 	rl	b
   02E9 21r00r00            701 	ld	hl, #_sprite_manager_sprites
   02EC 09                  702 	add	hl, bc
   02ED 4D                  703 	ld	c, l
   02EE 44                  704 	ld	b, h
   02EF 59                  705 	ld	e, c
   02F0 50                  706 	ld	d, b
   02F1 1A                  707 	ld	a,(de)
   02F2 F8 08               708 	ldhl	sp,	#8
   02F4 22                  709 	ld	(hl+), a
   02F5 13                  710 	inc	de
   02F6 1A                  711 	ld	a, (de)
   02F7 77                  712 	ld	(hl), a
   02F8 AF                  713 	xor	a, a
   02F9 F8 10               714 	ldhl	sp,	#16
   02FB 77                  715 	ld	(hl), a
   02FC                     716 00143$:
   02FC 21r00r00            717 	ld	hl, #_sprite_manager_updatables + 0
   02FF 4E                  718 	ld	c, (hl)
   0300 F8 10               719 	ldhl	sp,	#16
   0302 7E                  720 	ld	a, (hl)
   0303 91                  721 	sub	a, c
   0304 CAr4Dr05            722 	jp	Z,00145$
                            723 ;SpriteEnemy.c:83: if(iespr->type == SpritePlayer) {
   0307 F8 08               724 	ldhl	sp,#(9 - 1)
   0309 5E                  725 	ld	e, (hl)
   030A 23                  726 	inc	hl
   030B 56                  727 	ld	d, (hl)
   030C 21 11 00            728 	ld	hl, #0x0011
   030F 19                  729 	add	hl, de
   0310 7D                  730 	ld	a, l
   0311 54                  731 	ld	d, h
   0312 F8 0E               732 	ldhl	sp,	#14
   0314 22                  733 	ld	(hl+), a
   0315 72                  734 	ld	(hl), d
   0316 2B                  735 	dec	hl
   0317 5E                  736 	ld	e, (hl)
   0318 23                  737 	inc	hl
   0319 56                  738 	ld	d, (hl)
   031A 1A                  739 	ld	a,(de)
   031B B7                  740 	or	a, a
   031C 20 1D               741 	jr	NZ,00125$
                            742 ;SpriteEnemy.c:84: if(CheckCollision(THIS, iespr)) {
   031E F8 08               743 	ldhl	sp,	#8
   0320 2A                  744 	ld	a, (hl+)
   0321 66                  745 	ld	h, (hl)
   0322 6F                  746 	ld	l, a
   0323 E5                  747 	push	hl
   0324 21r00r00            748 	ld	hl, #_THIS
   0327 2A                  749 	ld	a, (hl+)
   0328 66                  750 	ld	h, (hl)
   0329 6F                  751 	ld	l, a
   032A E5                  752 	push	hl
   032B CDr00r00            753 	call	_CheckCollision
   032E E8 04               754 	add	sp, #4
   0330 7B                  755 	ld	a, e
   0331 B7                  756 	or	a, a
   0332 28 07               757 	jr	Z,00125$
                            758 ;SpriteEnemy.c:85: data->wait = 24u;
   0334 F8 04               759 	ldhl	sp,	#4
   0336 2A                  760 	ld	a, (hl+)
   0337 66                  761 	ld	h, (hl)
   0338 6F                  762 	ld	l, a
   0339 36 18               763 	ld	(hl), #0x18
   033B                     764 00125$:
                            765 ;SpriteEnemy.c:88: if(iespr->type == SpriteArrow) {
   033B F8 0E               766 	ldhl	sp,#(15 - 1)
   033D 5E                  767 	ld	e, (hl)
   033E 23                  768 	inc	hl
   033F 56                  769 	ld	d, (hl)
   0340 1A                  770 	ld	a,(de)
   0341 3D                  771 	dec	a
   0342 C2r27r05            772 	jp	NZ,00144$
                            773 ;SpriteEnemy.c:89: if(CheckCollision(THIS, iespr)) {
   0345 F8 08               774 	ldhl	sp,	#8
   0347 2A                  775 	ld	a, (hl+)
   0348 66                  776 	ld	h, (hl)
   0349 6F                  777 	ld	l, a
   034A E5                  778 	push	hl
   034B 21r00r00            779 	ld	hl, #_THIS
   034E 2A                  780 	ld	a, (hl+)
   034F 66                  781 	ld	h, (hl)
   0350 6F                  782 	ld	l, a
   0351 E5                  783 	push	hl
   0352 CDr00r00            784 	call	_CheckCollision
   0355 E8 04               785 	add	sp, #4
   0357 7B                  786 	ld	a, e
   0358 B7                  787 	or	a, a
   0359 CAr27r05            788 	jp	Z, 00144$
                            789 ;SpriteEnemy.c:90: struct ArrowInfo* arrowdata = (struct ArrowInfo*)iespr->custom_data;
   035C F8 08               790 	ldhl	sp,#(9 - 1)
   035E 5E                  791 	ld	e, (hl)
   035F 23                  792 	inc	hl
   0360 56                  793 	ld	d, (hl)
   0361 21 19 00            794 	ld	hl, #0x0019
   0364 19                  795 	add	hl, de
   0365 4D                  796 	ld	c, l
   0366 7C                  797 	ld	a, h
   0367 47                  798 	ld	b, a
                            799 ;SpriteEnemy.c:91: if (arrowdata->type == 6u){ //spine from porcupine
   0368 59                  800 	ld	e, c
   0369 50                  801 	ld	d, b
   036A 6B                  802 	ld	l, e
   036B 62                  803 	ld	h, d
   036C 7E                  804 	ld	a, (hl)
   036D E6 0F               805 	and	a, #0x0f
   036F D6 06               806 	sub	a, #0x06
   0371 CAr4Dr05            807 	jp	Z,00145$
   0374 18 03               808 	jr	00127$
                            809 ;SpriteEnemy.c:92: return;
   0376 C3r4Dr05            810 	jp	00145$
   0379                     811 00127$:
                            812 ;SpriteEnemy.c:94: data->wait = 24u;
   0379 F8 04               813 	ldhl	sp,	#4
   037B 2A                  814 	ld	a, (hl+)
   037C 66                  815 	ld	h, (hl)
   037D 6F                  816 	ld	l, a
   037E 36 18               817 	ld	(hl), #0x18
                            818 ;SpriteEnemy.c:95: SetSpriteAnim(THIS, enemy_hit, 24u); 
   0380 C5                  819 	push	bc
   0381 3E 18               820 	ld	a, #0x18
   0383 F5                  821 	push	af
   0384 33                  822 	inc	sp
   0385 21rC9r00            823 	ld	hl, #_enemy_hit
   0388 E5                  824 	push	hl
   0389 21r00r00            825 	ld	hl, #_THIS
   038C 2A                  826 	ld	a, (hl+)
   038D 66                  827 	ld	h, (hl)
   038E 6F                  828 	ld	l, a
   038F E5                  829 	push	hl
   0390 CDr00r00            830 	call	_SetSpriteAnim
   0393 E8 05               831 	add	sp, #5
   0395 C1                  832 	pop	bc
                            833 ;SpriteEnemy.c:96: data->hp -= arrowdata->arrowdamage;
   0396 D1                  834 	pop	de
   0397 D5                  835 	push	de
   0398 21 07 00            836 	ld	hl, #0x0007
   039B 19                  837 	add	hl, de
   039C 7D                  838 	ld	a, l
   039D 54                  839 	ld	d, h
   039E F8 0A               840 	ldhl	sp,	#10
   03A0 22                  841 	ld	(hl+), a
   03A1 72                  842 	ld	(hl), d
   03A2 2B                  843 	dec	hl
   03A3 5E                  844 	ld	e, (hl)
   03A4 23                  845 	inc	hl
   03A5 56                  846 	ld	d, (hl)
   03A6 1A                  847 	ld	a,(de)
   03A7 F8 0F               848 	ldhl	sp,	#15
   03A9 77                  849 	ld	(hl), a
   03AA 03                  850 	inc	bc
   03AB 03                  851 	inc	bc
   03AC 03                  852 	inc	bc
   03AD 03                  853 	inc	bc
   03AE 0A                  854 	ld	a, (bc)
   03AF 4F                  855 	ld	c, a
   03B0 7E                  856 	ld	a, (hl)
   03B1 91                  857 	sub	a, c
   03B2 4F                  858 	ld	c, a
   03B3 F8 0A               859 	ldhl	sp,	#10
   03B5 2A                  860 	ld	a, (hl+)
   03B6 66                  861 	ld	h, (hl)
   03B7 6F                  862 	ld	l, a
   03B8 71                  863 	ld	(hl), c
                            864 ;SpriteEnemy.c:40: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   03B9 21r01r00            865 	ld	hl, #_THIS + 1
   03BC 2B                  866 	dec	hl
   03BD 4E                  867 	ld	c, (hl)
   03BE 23                  868 	inc	hl
   03BF 46                  869 	ld	b, (hl)
                            870 ;SpriteEnemy.c:97: if (THIS->x < iespr->x){ //se la freccia arriva dalla destra dell' enemy
   03C0 21 08 00            871 	ld	hl, #0x0008
   03C3 09                  872 	add	hl, bc
   03C4 7D                  873 	ld	a, l
   03C5 54                  874 	ld	d, h
   03C6 F8 0E               875 	ldhl	sp,	#14
   03C8 22                  876 	ld	(hl+), a
   03C9 72                  877 	ld	(hl), d
   03CA 2B                  878 	dec	hl
   03CB 5E                  879 	ld	e, (hl)
   03CC 23                  880 	inc	hl
   03CD 56                  881 	ld	d, (hl)
   03CE 1A                  882 	ld	a,(de)
   03CF F8 0C               883 	ldhl	sp,	#12
   03D1 22                  884 	ld	(hl+), a
   03D2 13                  885 	inc	de
   03D3 1A                  886 	ld	a, (de)
   03D4 77                  887 	ld	(hl), a
   03D5 F8 08               888 	ldhl	sp,#(9 - 1)
   03D7 5E                  889 	ld	e, (hl)
   03D8 23                  890 	inc	hl
   03D9 56                  891 	ld	d, (hl)
   03DA 21 08 00            892 	ld	hl, #0x0008
   03DD 19                  893 	add	hl, de
   03DE 7D                  894 	ld	a, l
   03DF 54                  895 	ld	d, h
   03E0 F8 0E               896 	ldhl	sp,	#14
   03E2 22                  897 	ld	(hl+), a
   03E3 72                  898 	ld	(hl), d
   03E4 2B                  899 	dec	hl
   03E5 5E                  900 	ld	e, (hl)
   03E6 23                  901 	inc	hl
   03E7 56                  902 	ld	d, (hl)
   03E8 1A                  903 	ld	a,(de)
   03E9 2B                  904 	dec	hl
   03EA 22                  905 	ld	(hl+), a
   03EB 13                  906 	inc	de
   03EC 1A                  907 	ld	a, (de)
   03ED 77                  908 	ld	(hl), a
                            909 ;SpriteEnemy.c:98: if (SPRITE_GET_VMIRROR(THIS)){ // se sto andando a sinistra, l'ho preso da dietro! turn!
   03EE 21 0C 00            910 	ld	hl, #0x000c
   03F1 09                  911 	add	hl, bc
   03F2 4D                  912 	ld	c, l
   03F3 44                  913 	ld	b, h
   03F4 0A                  914 	ld	a, (bc)
   03F5 E6 20               915 	and	a, #0x20
   03F7 4F                  916 	ld	c, a
   03F8 06 00               917 	ld	b, #0x00
                            918 ;SpriteEnemy.c:97: if (THIS->x < iespr->x){ //se la freccia arriva dalla destra dell' enemy
   03FA F8 0C               919 	ldhl	sp,	#12
   03FC 5D                  920 	ld	e, l
   03FD 54                  921 	ld	d, h
   03FE F8 0E               922 	ldhl	sp,	#14
   0400 1A                  923 	ld	a, (de)
   0401 96                  924 	sub	a, (hl)
   0402 23                  925 	inc	hl
   0403 13                  926 	inc	de
   0404 1A                  927 	ld	a, (de)
   0405 9E                  928 	sbc	a, (hl)
   0406 D2r4Fr04            929 	jp	NC, 00133$
                            930 ;SpriteEnemy.c:98: if (SPRITE_GET_VMIRROR(THIS)){ // se sto andando a sinistra, l'ho preso da dietro! turn!
   0409 78                  931 	ld	a, b
   040A B1                  932 	or	a, c
   040B 28 03               933 	jr	Z,00129$
                            934 ;SpriteEnemy.c:99: ETurn();
   040D CDr7Fr05            935 	call	_ETurn
   0410                     936 00129$:
                            937 ;SpriteEnemy.c:101: data->tile_e_collision = TranslateSprite(THIS, -4 << delta_time, (data->enemy_accel_y >> 4));
   0410 D1                  938 	pop	de
   0411 D5                  939 	push	de
   0412 1A                  940 	ld	a,(de)
   0413 47                  941 	ld	b, a
   0414 13                  942 	inc	de
   0415 1A                  943 	ld	a,(de)
   0416 4F                  944 	ld	c, a
   0417 CB 29               945 	sra	c
   0419 CB 18               946 	rr	b
   041B CB 29               947 	sra	c
   041D CB 18               948 	rr	b
   041F CB 29               949 	sra	c
   0421 CB 18               950 	rr	b
   0423 CB 29               951 	sra	c
   0425 CB 18               952 	rr	b
   0427 21r00r00            953 	ld	hl, #_delta_time
   042A 4E                  954 	ld	c, (hl)
   042B 16 FC               955 	ld	d, #0xfc
   042D 0C                  956 	inc	c
   042E 18 02               957 	jr	00272$
   0430                     958 00271$:
   0430 CB 22               959 	sla	d
   0432                     960 00272$:
   0432 0D                  961 	dec	c
   0433 20 FB               962 	jr	NZ,00271$
   0435 C5                  963 	push	bc
   0436 33                  964 	inc	sp
   0437 D5                  965 	push	de
   0438 33                  966 	inc	sp
   0439 21r00r00            967 	ld	hl, #_THIS
   043C 2A                  968 	ld	a, (hl+)
   043D 66                  969 	ld	h, (hl)
   043E 6F                  970 	ld	l, a
   043F E5                  971 	push	hl
   0440 CDr00r00            972 	call	_TranslateSprite
   0443 E8 04               973 	add	sp, #4
   0445 4B                  974 	ld	c, e
   0446 F8 06               975 	ldhl	sp,	#6
   0448 2A                  976 	ld	a, (hl+)
   0449 66                  977 	ld	h, (hl)
   044A 6F                  978 	ld	l, a
   044B 71                  979 	ld	(hl), c
   044C C3r93r04            980 	jp	00134$
   044F                     981 00133$:
                            982 ;SpriteEnemy.c:103: if (!SPRITE_GET_VMIRROR(THIS)){ // se sto andando a destra, l'ho preso da dietro! turn!
   044F 78                  983 	ld	a, b
   0450 B1                  984 	or	a, c
   0451 20 03               985 	jr	NZ,00131$
                            986 ;SpriteEnemy.c:104: ETurn();
   0453 CDr7Fr05            987 	call	_ETurn
   0456                     988 00131$:
                            989 ;SpriteEnemy.c:106: data->tile_e_collision = TranslateSprite(THIS, 4 << delta_time, (data->enemy_accel_y >> 4));
   0456 D1                  990 	pop	de
   0457 D5                  991 	push	de
   0458 1A                  992 	ld	a,(de)
   0459 4F                  993 	ld	c, a
   045A 13                  994 	inc	de
   045B 1A                  995 	ld	a,(de)
   045C 47                  996 	ld	b, a
   045D CB 28               997 	sra	b
   045F CB 19               998 	rr	c
   0461 CB 28               999 	sra	b
   0463 CB 19              1000 	rr	c
   0465 CB 28              1001 	sra	b
   0467 CB 19              1002 	rr	c
   0469 CB 28              1003 	sra	b
   046B CB 19              1004 	rr	c
   046D 21r00r00           1005 	ld	hl, #_delta_time
   0470 46                 1006 	ld	b, (hl)
   0471 16 04              1007 	ld	d, #0x04
   0473 04                 1008 	inc	b
   0474 18 02              1009 	jr	00274$
   0476                    1010 00273$:
   0476 CB 22              1011 	sla	d
   0478                    1012 00274$:
   0478 05                 1013 	dec	b
   0479 20 FB              1014 	jr	NZ,00273$
   047B 79                 1015 	ld	a, c
   047C F5                 1016 	push	af
   047D 33                 1017 	inc	sp
   047E D5                 1018 	push	de
   047F 33                 1019 	inc	sp
   0480 21r00r00           1020 	ld	hl, #_THIS
   0483 2A                 1021 	ld	a, (hl+)
   0484 66                 1022 	ld	h, (hl)
   0485 6F                 1023 	ld	l, a
   0486 E5                 1024 	push	hl
   0487 CDr00r00           1025 	call	_TranslateSprite
   048A E8 04              1026 	add	sp, #4
   048C 4B                 1027 	ld	c, e
   048D F8 06              1028 	ldhl	sp,	#6
   048F 2A                 1029 	ld	a, (hl+)
   0490 66                 1030 	ld	h, (hl)
   0491 6F                 1031 	ld	l, a
   0492 71                 1032 	ld	(hl), c
   0493                    1033 00134$:
                           1034 ;SpriteEnemy.c:108: SpriteManagerRemoveSprite(iespr);
   0493 F8 08              1035 	ldhl	sp,	#8
   0495 2A                 1036 	ld	a, (hl+)
   0496 66                 1037 	ld	h, (hl)
   0497 6F                 1038 	ld	l, a
   0498 E5                 1039 	push	hl
   0499 CDr00r00           1040 	call	_SpriteManagerRemoveSprite
   049C E8 02              1041 	add	sp, #2
                           1042 ;SpriteEnemy.c:109: if (data->hp <= 0){
   049E F8 0A              1043 	ldhl	sp,#(11 - 1)
   04A0 5E                 1044 	ld	e, (hl)
   04A1 23                 1045 	inc	hl
   04A2 56                 1046 	ld	d, (hl)
   04A3 1A                 1047 	ld	a,(de)
   04A4 4F                 1048 	ld	c,a
   04A5 5F                 1049 	ld	e, a
   04A6 3E 00              1050 	ld	a, #0x00
   04A8 57                 1051 	ld	d, a
   04A9 AF                 1052 	xor	a, a
   04AA 91                 1053 	sub	a, c
   04AB CB 7B              1054 	bit	7, e
   04AD 28 07              1055 	jr	Z,00275$
   04AF CB 7A              1056 	bit	7, d
   04B1 20 08              1057 	jr	NZ,00276$
   04B3 BF                 1058 	cp	a, a
   04B4 18 05              1059 	jr	00276$
   04B6                    1060 00275$:
   04B6 CB 7A              1061 	bit	7, d
   04B8 28 01              1062 	jr	Z,00276$
   04BA 37                 1063 	scf
   04BB                    1064 00276$:
   04BB DAr27r05           1065 	jp	C, 00144$
                           1066 ;SpriteEnemy.c:110: NR50_REG = 0x55; //Max volume		
   04BE 3E 55              1067 	ld	a, #0x55
   04C0 E0r00              1068 	ldh	(_NR50_REG+0),a
                           1069 ;SpriteEnemy.c:111: PlayFx(CHANNEL_1, 5, 0x4b, 0xc2, 0x43, 0x68, 0x86);
   04C2 21 86 00           1070 	ld	hl, #0x0086
   04C5 E5                 1071 	push	hl
   04C6 2E 68              1072 	ld	l, #0x68
   04C8 E5                 1073 	push	hl
   04C9 2E 43              1074 	ld	l, #0x43
   04CB E5                 1075 	push	hl
   04CC 2E C2              1076 	ld	l, #0xc2
   04CE E5                 1077 	push	hl
   04CF 2E 4B              1078 	ld	l, #0x4b
   04D1 E5                 1079 	push	hl
   04D2 3E 05              1080 	ld	a, #0x05
   04D4 F5                 1081 	push	af
   04D5 33                 1082 	inc	sp
   04D6 AF                 1083 	xor	a, a
   04D7 F5                 1084 	push	af
   04D8 33                 1085 	inc	sp
   04D9 CDr00r00           1086 	call	_PlayFx
   04DC E8 0C              1087 	add	sp, #12
                           1088 ;SpriteEnemy.c:112: data->enemy_state = ENEMY_STATE_DEAD;
   04DE C1                 1089 	pop	bc
   04DF E1                 1090 	pop	hl
   04E0 E5                 1091 	push	hl
   04E1 C5                 1092 	push	bc
   04E2 36 03              1093 	ld	(hl), #0x03
                           1094 ;SpriteEnemy.c:113: SetSpriteAnim(THIS, enemy_dead, 16u);
   04E4 3E 10              1095 	ld	a, #0x10
   04E6 F5                 1096 	push	af
   04E7 33                 1097 	inc	sp
   04E8 21rCDr00           1098 	ld	hl, #_enemy_dead
   04EB E5                 1099 	push	hl
   04EC 21r00r00           1100 	ld	hl, #_THIS
   04EF 2A                 1101 	ld	a, (hl+)
   04F0 66                 1102 	ld	h, (hl)
   04F1 6F                 1103 	ld	l, a
   04F2 E5                 1104 	push	hl
   04F3 CDr00r00           1105 	call	_SetSpriteAnim
   04F6 E8 05              1106 	add	sp, #5
                           1107 ;SpriteEnemy.c:114: data->wait = 8u;
   04F8 F8 04              1108 	ldhl	sp,	#4
   04FA 2A                 1109 	ld	a, (hl+)
   04FB 66                 1110 	ld	h, (hl)
   04FC 6F                 1111 	ld	l, a
   04FD 36 08              1112 	ld	(hl), #0x08
                           1113 ;SpriteEnemy.c:115: THIS->lim_x = 8u;
   04FF 21r00r00           1114 	ld	hl, #_THIS
   0502 46                 1115 	ld	b, (hl)
   0503 23                 1116 	inc	hl
   0504 4E                 1117 	ld	c, (hl)
   0505 78                 1118 	ld	a, b
   0506 C6 13              1119 	add	a, #0x13
   0508 47                 1120 	ld	b, a
   0509 30 01              1121 	jr	NC,00277$
   050B 0C                 1122 	inc	c
   050C                    1123 00277$:
   050C 68                 1124 	ld	l, b
   050D 61                 1125 	ld	h, c
   050E 36 08              1126 	ld	(hl), #0x08
   0510 23                 1127 	inc	hl
   0511 36 00              1128 	ld	(hl), #0x00
                           1129 ;SpriteEnemy.c:116: THIS->lim_y = 16u;
   0513 21r00r00           1130 	ld	hl, #_THIS
   0516 46                 1131 	ld	b, (hl)
   0517 23                 1132 	inc	hl
   0518 4E                 1133 	ld	c, (hl)
   0519 78                 1134 	ld	a, b
   051A C6 15              1135 	add	a, #0x15
   051C 47                 1136 	ld	b, a
   051D 30 01              1137 	jr	NC,00278$
   051F 0C                 1138 	inc	c
   0520                    1139 00278$:
   0520 68                 1140 	ld	l, b
   0521 61                 1141 	ld	h, c
   0522 36 10              1142 	ld	(hl), #0x10
   0524 23                 1143 	inc	hl
   0525 36 00              1144 	ld	(hl), #0x00
   0527                    1145 00144$:
                           1146 ;SpriteEnemy.c:82: SPRITEMANAGER_ITERATE(scroll_e_tile, iespr) {
   0527 F8 10              1147 	ldhl	sp,	#16
   0529 34                 1148 	inc	(hl)
   052A 4E                 1149 	ld	c, (hl)
   052B 06 00              1150 	ld	b, #0x00
   052D 03                 1151 	inc	bc
   052E 21r00r00           1152 	ld	hl, #_sprite_manager_updatables
   0531 09                 1153 	add	hl, bc
   0532 4D                 1154 	ld	c,l
   0533 7C                 1155 	ld	a,h
   0534 4E                 1156 	ld	c, (hl)
   0535 06 00              1157 	ld	b, #0x00
   0537 CB 21              1158 	sla	c
   0539 CB 10              1159 	rl	b
   053B 21r00r00           1160 	ld	hl, #_sprite_manager_sprites
   053E 09                 1161 	add	hl, bc
   053F 4D                 1162 	ld	c, l
   0540 44                 1163 	ld	b, h
   0541 59                 1164 	ld	e, c
   0542 50                 1165 	ld	d, b
   0543 1A                 1166 	ld	a,(de)
   0544 F8 08              1167 	ldhl	sp,	#8
   0546 22                 1168 	ld	(hl+), a
   0547 13                 1169 	inc	de
   0548 1A                 1170 	ld	a, (de)
   0549 77                 1171 	ld	(hl), a
   054A C3rFCr02           1172 	jp	00143$
   054D                    1173 00145$:
                           1174 ;SpriteEnemy.c:122: }
   054D E8 11              1175 	add	sp, #17
   054F C9                 1176 	ret
                           1177 ;SpriteEnemy.c:125: void CheckCollisionETile() {
                           1178 ;	---------------------------------
                           1179 ; Function CheckCollisionETile
                           1180 ; ---------------------------------
   0550                    1181 _CheckCollisionETile::
                           1182 ;SpriteEnemy.c:126: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0550 21r01r00           1183 	ld	hl, #_THIS + 1
   0553 2B                 1184 	dec	hl
   0554 4E                 1185 	ld	c, (hl)
   0555 23                 1186 	inc	hl
   0556 46                 1187 	ld	b, (hl)
   0557 21 19 00           1188 	ld	hl, #0x0019
   055A 09                 1189 	add	hl, bc
   055B 4D                 1190 	ld	c, l
   055C 7C                 1191 	ld	a, h
   055D 47                 1192 	ld	b, a
                           1193 ;SpriteEnemy.c:127: switch(data->tile_e_collision) {
   055E 03                 1194 	inc	bc
   055F 03                 1195 	inc	bc
   0560 03                 1196 	inc	bc
   0561 78                 1197 	ld	a, b
   0562 69                 1198 	ld	l, c
   0563 67                 1199 	ld	h, a
   0564 7E                 1200 	ld	a, (hl)
   0565 FE 04              1201 	cp	a, #0x04
   0567 28 13              1202 	jr	Z,00106$
   0569 FE 05              1203 	cp	a, #0x05
   056B 28 0F              1204 	jr	Z,00106$
   056D FE 06              1205 	cp	a, #0x06
   056F 28 0B              1206 	jr	Z,00106$
   0571 FE 07              1207 	cp	a, #0x07
   0573 28 07              1208 	jr	Z,00106$
   0575 FE 12              1209 	cp	a, #0x12
   0577 28 03              1210 	jr	Z,00106$
   0579 D6 13              1211 	sub	a, #0x13
   057B C0                 1212 	ret	NZ
                           1213 ;SpriteEnemy.c:133: case 19u:
   057C                    1214 00106$:
                           1215 ;SpriteEnemy.c:134: ETurn();
                           1216 ;SpriteEnemy.c:136: }
                           1217 ;SpriteEnemy.c:137: }
   057C C3r7Fr05           1218 	jp	_ETurn
                           1219 ;SpriteEnemy.c:139: void ETurn(){
                           1220 ;	---------------------------------
                           1221 ; Function ETurn
                           1222 ; ---------------------------------
   057F                    1223 _ETurn::
   057F E8 F8              1224 	add	sp, #-8
                           1225 ;SpriteEnemy.c:140: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0581 21r01r00           1226 	ld	hl, #_THIS + 1
   0584 2B                 1227 	dec	hl
   0585 4E                 1228 	ld	c, (hl)
   0586 23                 1229 	inc	hl
   0587 46                 1230 	ld	b, (hl)
   0588 21 19 00           1231 	ld	hl, #0x0019
   058B 09                 1232 	add	hl, bc
   058C 7D                 1233 	ld	a, l
   058D 54                 1234 	ld	d, h
   058E F8 06              1235 	ldhl	sp,	#6
   0590 22                 1236 	ld	(hl+), a
   0591 72                 1237 	ld	(hl), d
   0592 2B                 1238 	dec	hl
   0593 2A                 1239 	ld	a, (hl+)
   0594 5E                 1240 	ld	e, (hl)
   0595 F8 00              1241 	ldhl	sp,	#0
   0597 22                 1242 	ld	(hl+), a
   0598 73                 1243 	ld	(hl), e
                           1244 ;SpriteEnemy.c:141: if (data->vx == 1){
   0599 D1                 1245 	pop	de
   059A D5                 1246 	push	de
   059B 21 04 00           1247 	ld	hl, #0x0004
   059E 19                 1248 	add	hl, de
   059F 7D                 1249 	ld	a, l
   05A0 54                 1250 	ld	d, h
   05A1 F8 02              1251 	ldhl	sp,	#2
   05A3 22                 1252 	ld	(hl+), a
   05A4 72                 1253 	ld	(hl), d
   05A5 2B                 1254 	dec	hl
   05A6 5E                 1255 	ld	e, (hl)
   05A7 23                 1256 	inc	hl
   05A8 56                 1257 	ld	d, (hl)
   05A9 1A                 1258 	ld	a,(de)
   05AA F8 07              1259 	ldhl	sp,	#7
   05AC 77                 1260 	ld	(hl), a
                           1261 ;SpriteEnemy.c:144: data->wait = 48u;
   05AD D1                 1262 	pop	de
   05AE D5                 1263 	push	de
   05AF 21 05 00           1264 	ld	hl, #0x0005
   05B2 19                 1265 	add	hl, de
   05B3 7D                 1266 	ld	a, l
   05B4 54                 1267 	ld	d, h
   05B5 F8 04              1268 	ldhl	sp,	#4
   05B7 22                 1269 	ld	(hl+), a
   05B8 72                 1270 	ld	(hl), d
                           1271 ;SpriteEnemy.c:141: if (data->vx == 1){
   05B9 23                 1272 	inc	hl
   05BA 23                 1273 	inc	hl
   05BB 7E                 1274 	ld	a, (hl)
   05BC 3D                 1275 	dec	a
   05BD C2rFAr05           1276 	jp	NZ,00102$
                           1277 ;SpriteEnemy.c:142: SPRITE_SET_VMIRROR(THIS);
   05C0 21 0C 00           1278 	ld	hl, #0x000c
   05C3 09                 1279 	add	hl, bc
   05C4 4D                 1280 	ld	c, l
   05C5 44                 1281 	ld	b, h
   05C6 0A                 1282 	ld	a, (bc)
   05C7 CB EF              1283 	set	5, a
   05C9 02                 1284 	ld	(bc), a
                           1285 ;SpriteEnemy.c:140: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   05CA 21r01r00           1286 	ld	hl, #_THIS + 1
   05CD 2B                 1287 	dec	hl
   05CE 4E                 1288 	ld	c, (hl)
   05CF 23                 1289 	inc	hl
   05D0 46                 1290 	ld	b, (hl)
                           1291 ;SpriteEnemy.c:143: THIS->x -= 4;
   05D1 21 08 00           1292 	ld	hl, #0x0008
   05D4 09                 1293 	add	hl, bc
   05D5 7D                 1294 	ld	a, l
   05D6 54                 1295 	ld	d, h
   05D7 F8 06              1296 	ldhl	sp,	#6
   05D9 22                 1297 	ld	(hl+), a
   05DA 72                 1298 	ld	(hl), d
   05DB 2B                 1299 	dec	hl
   05DC 5E                 1300 	ld	e, (hl)
   05DD 23                 1301 	inc	hl
   05DE 56                 1302 	ld	d, (hl)
   05DF 1A                 1303 	ld	a,(de)
   05E0 4F                 1304 	ld	c, a
   05E1 13                 1305 	inc	de
   05E2 1A                 1306 	ld	a,(de)
   05E3 47                 1307 	ld	b, a
   05E4 79                 1308 	ld	a, c
   05E5 C6 FC              1309 	add	a, #0xfc
   05E7 4F                 1310 	ld	c, a
   05E8 78                 1311 	ld	a, b
   05E9 CE FF              1312 	adc	a, #0xff
   05EB 47                 1313 	ld	b, a
   05EC 2B                 1314 	dec	hl
   05ED 2A                 1315 	ld	a, (hl+)
   05EE 66                 1316 	ld	h, (hl)
   05EF 6F                 1317 	ld	l, a
   05F0 71                 1318 	ld	(hl), c
   05F1 23                 1319 	inc	hl
   05F2 70                 1320 	ld	(hl), b
                           1321 ;SpriteEnemy.c:144: data->wait = 48u;
   05F3 F8 04              1322 	ldhl	sp,	#4
   05F5 2A                 1323 	ld	a, (hl+)
   05F6 66                 1324 	ld	h, (hl)
   05F7 6F                 1325 	ld	l, a
   05F8 36 30              1326 	ld	(hl), #0x30
   05FA                    1327 00102$:
                           1328 ;SpriteEnemy.c:146: if (data->vx == -1){
   05FA F8 02              1329 	ldhl	sp,#(3 - 1)
   05FC 5E                 1330 	ld	e, (hl)
   05FD 23                 1331 	inc	hl
   05FE 56                 1332 	ld	d, (hl)
   05FF 1A                 1333 	ld	a,(de)
   0600 3C                 1334 	inc	a
   0601 C2r41r06           1335 	jp	NZ,00104$
                           1336 ;SpriteEnemy.c:140: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0604 21r01r00           1337 	ld	hl, #_THIS + 1
   0607 2B                 1338 	dec	hl
   0608 4E                 1339 	ld	c, (hl)
   0609 23                 1340 	inc	hl
   060A 46                 1341 	ld	b, (hl)
                           1342 ;SpriteEnemy.c:142: SPRITE_SET_VMIRROR(THIS);
   060B 21 0C 00           1343 	ld	hl, #0x000c
   060E 09                 1344 	add	hl, bc
   060F 4D                 1345 	ld	c, l
   0610 44                 1346 	ld	b, h
                           1347 ;SpriteEnemy.c:147: SPRITE_UNSET_VMIRROR(THIS);
   0611 0A                 1348 	ld	a, (bc)
   0612 CB AF              1349 	res	5, a
   0614 02                 1350 	ld	(bc), a
                           1351 ;SpriteEnemy.c:140: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0615 21r01r00           1352 	ld	hl, #_THIS + 1
   0618 2B                 1353 	dec	hl
   0619 4E                 1354 	ld	c, (hl)
   061A 23                 1355 	inc	hl
   061B 46                 1356 	ld	b, (hl)
                           1357 ;SpriteEnemy.c:143: THIS->x -= 4;
   061C 21 08 00           1358 	ld	hl, #0x0008
   061F 09                 1359 	add	hl, bc
   0620 7D                 1360 	ld	a, l
   0621 54                 1361 	ld	d, h
   0622 F8 06              1362 	ldhl	sp,	#6
   0624 22                 1363 	ld	(hl+), a
   0625 72                 1364 	ld	(hl), d
                           1365 ;SpriteEnemy.c:148: THIS->x += 4;
   0626 2B                 1366 	dec	hl
   0627 5E                 1367 	ld	e, (hl)
   0628 23                 1368 	inc	hl
   0629 56                 1369 	ld	d, (hl)
   062A 1A                 1370 	ld	a,(de)
   062B 4F                 1371 	ld	c, a
   062C 13                 1372 	inc	de
   062D 1A                 1373 	ld	a,(de)
   062E 47                 1374 	ld	b, a
   062F 03                 1375 	inc	bc
   0630 03                 1376 	inc	bc
   0631 03                 1377 	inc	bc
   0632 03                 1378 	inc	bc
   0633 2B                 1379 	dec	hl
   0634 2A                 1380 	ld	a, (hl+)
   0635 66                 1381 	ld	h, (hl)
   0636 6F                 1382 	ld	l, a
   0637 71                 1383 	ld	(hl), c
   0638 23                 1384 	inc	hl
   0639 70                 1385 	ld	(hl), b
                           1386 ;SpriteEnemy.c:149: data->wait = 48u;			
   063A F8 04              1387 	ldhl	sp,	#4
   063C 2A                 1388 	ld	a, (hl+)
   063D 66                 1389 	ld	h, (hl)
   063E 6F                 1390 	ld	l, a
   063F 36 30              1391 	ld	(hl), #0x30
   0641                    1392 00104$:
                           1393 ;SpriteEnemy.c:151: data->vx = -data->vx;
   0641 F8 02              1394 	ldhl	sp,#(3 - 1)
   0643 5E                 1395 	ld	e, (hl)
   0644 23                 1396 	inc	hl
   0645 56                 1397 	ld	d, (hl)
   0646 1A                 1398 	ld	a,(de)
   0647 4F                 1399 	ld	c, a
   0648 AF                 1400 	xor	a, a
   0649 91                 1401 	sub	a, c
   064A 4F                 1402 	ld	c, a
   064B 2B                 1403 	dec	hl
   064C 2A                 1404 	ld	a, (hl+)
   064D 66                 1405 	ld	h, (hl)
   064E 6F                 1406 	ld	l, a
   064F 71                 1407 	ld	(hl), c
                           1408 ;SpriteEnemy.c:152: if(THIS->type == SpritePorcupine){
   0650 21r01r00           1409 	ld	hl, #_THIS + 1
   0653 2B                 1410 	dec	hl
   0654 4E                 1411 	ld	c, (hl)
   0655 23                 1412 	inc	hl
   0656 46                 1413 	ld	b, (hl)
   0657 21 11 00           1414 	ld	hl, #0x0011
   065A 09                 1415 	add	hl, bc
   065B 4D                 1416 	ld	c, l
   065C 44                 1417 	ld	b, h
   065D 0A                 1418 	ld	a, (bc)
   065E D6 06              1419 	sub	a, #0x06
   0660 20 11              1420 	jr	NZ,00107$
                           1421 ;SpriteEnemy.c:153: data->enemy_state = ENEMY_STATE_ATTACK;
   0662 C1                 1422 	pop	bc
   0663 C5                 1423 	push	bc
   0664 03                 1424 	inc	bc
   0665 03                 1425 	inc	bc
   0666 3E 04              1426 	ld	a, #0x04
   0668 02                 1427 	ld	(bc), a
                           1428 ;SpriteEnemy.c:154: data->wait = attack_wait;
   0669 F8 04              1429 	ldhl	sp,#(5 - 1)
   066B 5E                 1430 	ld	e, (hl)
   066C 23                 1431 	inc	hl
   066D 56                 1432 	ld	d, (hl)
   066E 21r01r00           1433 	ld	hl, #_attack_wait
   0671 7E                 1434 	ld	a, (hl)
   0672 12                 1435 	ld	(de), a
   0673                    1436 00107$:
                           1437 ;SpriteEnemy.c:157: }
   0673 E8 08              1438 	add	sp, #8
   0675 C9                 1439 	ret
                           1440 ;SpriteEnemy.c:159: void Destroy_SpriteEnemy() {
                           1441 ;	---------------------------------
                           1442 ; Function Destroy_SpriteEnemy
                           1443 ; ---------------------------------
   0676                    1444 _Destroy_SpriteEnemy::
                           1445 ;SpriteEnemy.c:160: }
   0676 C9                 1446 	ret
                           1447 	.area _CODE_2
                           1448 	.area _CABS (ABS)
