                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module SpriteEnemy
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _Destroy_SpriteEnemy
                             12 	.globl _Update_SpriteEnemy
                             13 	.globl _Start_SpriteEnemy
                             14 	.globl _PlayFx
                             15 	.globl _SpriteManagerRemoveSprite
                             16 	.globl _CheckCollision
                             17 	.globl _TranslateSprite
                             18 	.globl _SetSpriteAnim
                             19 	.globl _empty
                             20 	.globl _bank_SpriteEnemy
                             21 	.globl _attack_wait
                             22 	.globl _damage_cooldown
                             23 	.globl _enemy_dead
                             24 	.globl _enemy_hit
                             25 	.globl _enemy_walk
                             26 	.globl _enemy_idle
                             27 	.globl _CheckCollisionETile
                             28 	.globl _ETurn
                             29 ;--------------------------------------------------------
                             30 ; special function registers
                             31 ;--------------------------------------------------------
                             32 ;--------------------------------------------------------
                             33 ; ram data
                             34 ;--------------------------------------------------------
                             35 	.area _DATA
   0000                      36 _damage_cooldown::
   0000                      37 	.ds 1
   0001                      38 _attack_wait::
   0001                      39 	.ds 1
                             40 ;--------------------------------------------------------
                             41 ; CODE rom data
                             42 ;--------------------------------------------------------
                             43 	.area _CODE
   0000                      44 _bank_SpriteEnemy:
   0000 02                   45 	.db #0x02	; 2
                             46 ;--------------------------------------------------------
                             47 ; absolute external ram data
                             48 ;--------------------------------------------------------
                             49 	.area _DABS (ABS)
                             50 ;--------------------------------------------------------
                             51 ; global & static initialisations
                             52 ;--------------------------------------------------------
                             53 	.area _HOME
                             54 	.area _GSINIT
                             55 	.area _GSFINAL
                             56 	.area _GSINIT
                             57 ;custom_datas.h:54: UINT8 damage_cooldown = 30u;
   0000 21r00r00             58 	ld	hl, #_damage_cooldown
   0003 36 1E                59 	ld	(hl), #0x1e
                             60 ;custom_datas.h:55: UINT8 attack_wait = 32u;
   0005 21r01r00             61 	ld	hl, #_attack_wait
   0008 36 20                62 	ld	(hl), #0x20
                             63 ;--------------------------------------------------------
                             64 ; Home
                             65 ;--------------------------------------------------------
                             66 	.area _HOME
                             67 ;C:/GB/ZGB/common/include/Banks/SetBankCommon.h:4: void empty(void) __nonbanked {}
                             68 ;	---------------------------------
                             69 ; Function empty
                             70 ; ---------------------------------
   0000                      71 _empty::
   0000 C9                   72 	ret
                             73 	.area _HOME
                             74 ;--------------------------------------------------------
                             75 ; code
                             76 ;--------------------------------------------------------
                             77 	.area _CODE_2
                             78 ;SpriteEnemy.c:20: void Start_SpriteEnemy() {
                             79 ;	---------------------------------
                             80 ; Function Start_SpriteEnemy
                             81 ; ---------------------------------
   0000                      82 _Start_SpriteEnemy::
   0000 E8 FE                83 	add	sp, #-2
                             84 ;SpriteEnemy.c:22: THIS->coll_x = 2;
   0002 21r01r00             85 	ld	hl, #_THIS + 1
   0005 2B                   86 	dec	hl
   0006 4E                   87 	ld	c, (hl)
   0007 23                   88 	inc	hl
   0008 46                   89 	ld	b, (hl)
   0009 21 0D 00             90 	ld	hl, #0x000d
   000C 09                   91 	add	hl, bc
   000D 4D                   92 	ld	c,l
   000E 7C                   93 	ld	a,h
   000F 36 02                94 	ld	(hl), #0x02
                             95 ;SpriteEnemy.c:23: THIS->coll_y = 4;
   0011 21r01r00             96 	ld	hl, #_THIS + 1
   0014 2B                   97 	dec	hl
   0015 4E                   98 	ld	c, (hl)
   0016 23                   99 	inc	hl
   0017 46                  100 	ld	b, (hl)
   0018 21 0E 00            101 	ld	hl, #0x000e
   001B 09                  102 	add	hl, bc
   001C 4D                  103 	ld	c,l
   001D 7C                  104 	ld	a,h
   001E 36 04               105 	ld	(hl), #0x04
                            106 ;SpriteEnemy.c:24: THIS->coll_w = 6;
   0020 21r01r00            107 	ld	hl, #_THIS + 1
   0023 2B                  108 	dec	hl
   0024 4E                  109 	ld	c, (hl)
   0025 23                  110 	inc	hl
   0026 46                  111 	ld	b, (hl)
   0027 21 0F 00            112 	ld	hl, #0x000f
   002A 09                  113 	add	hl, bc
   002B 4D                  114 	ld	c,l
   002C 7C                  115 	ld	a,h
   002D 36 06               116 	ld	(hl), #0x06
                            117 ;SpriteEnemy.c:25: THIS->coll_h = 12;
   002F 21r01r00            118 	ld	hl, #_THIS + 1
   0032 2B                  119 	dec	hl
   0033 4E                  120 	ld	c, (hl)
   0034 23                  121 	inc	hl
   0035 46                  122 	ld	b, (hl)
   0036 21 10 00            123 	ld	hl, #0x0010
   0039 09                  124 	add	hl, bc
   003A 4D                  125 	ld	c,l
   003B 7C                  126 	ld	a,h
   003C 36 0C               127 	ld	(hl), #0x0c
                            128 ;SpriteEnemy.c:26: THIS->lim_x = 255u;
   003E 21r00r00            129 	ld	hl, #_THIS
   0041 46                  130 	ld	b, (hl)
   0042 23                  131 	inc	hl
   0043 4E                  132 	ld	c, (hl)
   0044 78                  133 	ld	a, b
   0045 C6 13               134 	add	a, #0x13
   0047 47                  135 	ld	b, a
   0048 30 01               136 	jr	NC,00103$
   004A 0C                  137 	inc	c
   004B                     138 00103$:
   004B 68                  139 	ld	l, b
   004C 61                  140 	ld	h, c
   004D 36 FF               141 	ld	(hl), #0xff
   004F 23                  142 	inc	hl
   0050 36 00               143 	ld	(hl), #0x00
                            144 ;SpriteEnemy.c:27: THIS->lim_y = 244u;
   0052 21r00r00            145 	ld	hl, #_THIS
   0055 46                  146 	ld	b, (hl)
   0056 23                  147 	inc	hl
   0057 4E                  148 	ld	c, (hl)
   0058 78                  149 	ld	a, b
   0059 C6 15               150 	add	a, #0x15
   005B 47                  151 	ld	b, a
   005C 30 01               152 	jr	NC,00104$
   005E 0C                  153 	inc	c
   005F                     154 00104$:
   005F 68                  155 	ld	l, b
   0060 61                  156 	ld	h, c
   0061 36 F4               157 	ld	(hl), #0xf4
   0063 23                  158 	inc	hl
   0064 36 00               159 	ld	(hl), #0x00
                            160 ;SpriteEnemy.c:28: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;	
   0066 21r01r00            161 	ld	hl, #_THIS + 1
   0069 2B                  162 	dec	hl
   006A 4E                  163 	ld	c, (hl)
   006B 23                  164 	inc	hl
   006C 46                  165 	ld	b, (hl)
   006D 21 19 00            166 	ld	hl, #0x0019
   0070 09                  167 	add	hl, bc
   0071 4D                  168 	ld	c, l
   0072 7C                  169 	ld	a, h
   0073 47                  170 	ld	b, a
                            171 ;SpriteEnemy.c:29: SetSpriteAnim(THIS, enemy_idle, 8u);
   0074 C5                  172 	push	bc
   0075 3E 08               173 	ld	a, #0x08
   0077 F5                  174 	push	af
   0078 33                  175 	inc	sp
   0079 21rC4r00            176 	ld	hl, #_enemy_idle
   007C E5                  177 	push	hl
   007D 21r00r00            178 	ld	hl, #_THIS
   0080 2A                  179 	ld	a, (hl+)
   0081 66                  180 	ld	h, (hl)
   0082 6F                  181 	ld	l, a
   0083 E5                  182 	push	hl
   0084 CDr00r00            183 	call	_SetSpriteAnim
   0087 E8 05               184 	add	sp, #5
   0089 C1                  185 	pop	bc
                            186 ;SpriteEnemy.c:30: data->enemy_accel_y = 24;
   008A 69                  187 	ld	l, c
   008B 60                  188 	ld	h, b
   008C 36 18               189 	ld	(hl), #0x18
   008E 23                  190 	inc	hl
   008F 36 00               191 	ld	(hl), #0x00
                            192 ;SpriteEnemy.c:31: data->vx = 1;
   0091 21 04 00            193 	ld	hl, #0x0004
   0094 09                  194 	add	hl, bc
   0095 33                  195 	inc	sp
   0096 33                  196 	inc	sp
   0097 E5                  197 	push	hl
   0098 E1                  198 	pop	hl
   0099 E5                  199 	push	hl
   009A 36 01               200 	ld	(hl), #0x01
                            201 ;SpriteEnemy.c:32: data->wait = 0u;
   009C 21 05 00            202 	ld	hl, #0x0005
   009F 09                  203 	add	hl, bc
   00A0 33                  204 	inc	sp
   00A1 33                  205 	inc	sp
   00A2 E5                  206 	push	hl
   00A3 E1                  207 	pop	hl
   00A4 E5                  208 	push	hl
   00A5 36 00               209 	ld	(hl), #0x00
                            210 ;SpriteEnemy.c:33: data->enemydamage = 5u;
   00A7 21 06 00            211 	ld	hl, #0x0006
   00AA 09                  212 	add	hl, bc
   00AB 33                  213 	inc	sp
   00AC 33                  214 	inc	sp
   00AD E5                  215 	push	hl
   00AE E1                  216 	pop	hl
   00AF E5                  217 	push	hl
   00B0 36 05               218 	ld	(hl), #0x05
                            219 ;SpriteEnemy.c:34: data->hp = 45u;
   00B2 21 07 00            220 	ld	hl, #0x0007
   00B5 09                  221 	add	hl, bc
   00B6 33                  222 	inc	sp
   00B7 33                  223 	inc	sp
   00B8 E5                  224 	push	hl
   00B9 E1                  225 	pop	hl
   00BA E5                  226 	push	hl
   00BB 36 2D               227 	ld	(hl), #0x2d
                            228 ;SpriteEnemy.c:35: data->enemy_state = ENEMY_STATE_NORMAL;
   00BD 03                  229 	inc	bc
   00BE 03                  230 	inc	bc
   00BF AF                  231 	xor	a, a
   00C0 02                  232 	ld	(bc), a
                            233 ;SpriteEnemy.c:36: }
   00C1 E8 02               234 	add	sp, #2
   00C3 C9                  235 	ret
   00C4                     236 _enemy_idle:
   00C4 01                  237 	.db #0x01	; 1
   00C5 00                  238 	.db #0x00	; 0
   00C6                     239 _enemy_walk:
   00C6 02                  240 	.db #0x02	; 2
   00C7 00                  241 	.db #0x00	; 0
   00C8 01                  242 	.db #0x01	; 1
   00C9                     243 _enemy_hit:
   00C9 03                  244 	.db #0x03	; 3
   00CA 02                  245 	.db #0x02	; 2
   00CB 03                  246 	.db #0x03	; 3
   00CC 04                  247 	.db #0x04	; 4
   00CD                     248 _enemy_dead:
   00CD 01                  249 	.db #0x01	; 1
   00CE 05                  250 	.db #0x05	; 5
                            251 ;SpriteEnemy.c:38: void Update_SpriteEnemy() {
                            252 ;	---------------------------------
                            253 ; Function Update_SpriteEnemy
                            254 ; ---------------------------------
   00CF                     255 _Update_SpriteEnemy::
   00CF E8 EF               256 	add	sp, #-17
                            257 ;SpriteEnemy.c:40: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   00D1 21r00r00            258 	ld	hl, #_THIS
   00D4 2A                  259 	ld	a, (hl+)
   00D5 5E                  260 	ld	e, (hl)
   00D6 F8 0E               261 	ldhl	sp,	#14
   00D8 22                  262 	ld	(hl+), a
   00D9 73                  263 	ld	(hl), e
   00DA 2B                  264 	dec	hl
   00DB 5E                  265 	ld	e, (hl)
   00DC 23                  266 	inc	hl
   00DD 56                  267 	ld	d, (hl)
   00DE 21 19 00            268 	ld	hl, #0x0019
   00E1 19                  269 	add	hl, de
   00E2 4D                  270 	ld	c, l
   00E3 44                  271 	ld	b, h
   00E4 33                  272 	inc	sp
   00E5 33                  273 	inc	sp
   00E6 C5                  274 	push	bc
                            275 ;SpriteEnemy.c:42: if (data->enemy_state == ENEMY_STATE_DEAD){
   00E7 D1                  276 	pop	de
   00E8 D5                  277 	push	de
   00E9 21 02 00            278 	ld	hl, #0x0002
   00EC 19                  279 	add	hl, de
   00ED 7D                  280 	ld	a, l
   00EE 54                  281 	ld	d, h
   00EF F8 02               282 	ldhl	sp,	#2
   00F1 22                  283 	ld	(hl+), a
   00F2 72                  284 	ld	(hl), d
   00F3 2B                  285 	dec	hl
   00F4 5E                  286 	ld	e, (hl)
   00F5 23                  287 	inc	hl
   00F6 56                  288 	ld	d, (hl)
   00F7 1A                  289 	ld	a,(de)
   00F8 4F                  290 	ld	c, a
                            291 ;SpriteEnemy.c:43: if (data->wait > 0){
   00F9 D1                  292 	pop	de
   00FA D5                  293 	push	de
   00FB 21 05 00            294 	ld	hl, #0x0005
   00FE 19                  295 	add	hl, de
   00FF 7D                  296 	ld	a, l
   0100 54                  297 	ld	d, h
   0101 F8 04               298 	ldhl	sp,	#4
   0103 22                  299 	ld	(hl+), a
   0104 72                  300 	ld	(hl), d
   0105 2B                  301 	dec	hl
   0106 5E                  302 	ld	e, (hl)
   0107 23                  303 	inc	hl
   0108 56                  304 	ld	d, (hl)
   0109 1A                  305 	ld	a,(de)
   010A F8 10               306 	ldhl	sp,	#16
   010C 77                  307 	ld	(hl), a
                            308 ;SpriteEnemy.c:42: if (data->enemy_state == ENEMY_STATE_DEAD){
   010D 79                  309 	ld	a, c
   010E D6 03               310 	sub	a, #0x03
   0110 C2r78r01            311 	jp	NZ,00105$
                            312 ;SpriteEnemy.c:44: THIS->y--;
   0113 2B                  313 	dec	hl
   0114 2B                  314 	dec	hl
   0115 5E                  315 	ld	e, (hl)
   0116 23                  316 	inc	hl
   0117 56                  317 	ld	d, (hl)
   0118 21 0A 00            318 	ld	hl, #0x000a
   011B 19                  319 	add	hl, de
   011C 7D                  320 	ld	a, l
   011D 54                  321 	ld	d, h
   011E F8 0C               322 	ldhl	sp,	#12
   0120 22                  323 	ld	(hl+), a
   0121 72                  324 	ld	(hl), d
   0122 2B                  325 	dec	hl
   0123 5E                  326 	ld	e, (hl)
   0124 23                  327 	inc	hl
   0125 56                  328 	ld	d, (hl)
   0126 1A                  329 	ld	a,(de)
   0127 4F                  330 	ld	c, a
   0128 13                  331 	inc	de
   0129 1A                  332 	ld	a,(de)
   012A 47                  333 	ld	b, a
                            334 ;SpriteEnemy.c:43: if (data->wait > 0){
   012B F8 10               335 	ldhl	sp,	#16
   012D 7E                  336 	ld	a, (hl)
   012E B7                  337 	or	a, a
   012F 28 19               338 	jr	Z,00102$
                            339 ;SpriteEnemy.c:44: THIS->y--;
   0131 0B                  340 	dec	bc
   0132 F8 0C               341 	ldhl	sp,	#12
   0134 2A                  342 	ld	a, (hl+)
   0135 66                  343 	ld	h, (hl)
   0136 6F                  344 	ld	l, a
   0137 71                  345 	ld	(hl), c
   0138 23                  346 	inc	hl
   0139 70                  347 	ld	(hl), b
                            348 ;SpriteEnemy.c:45: data->wait--;
   013A F8 04               349 	ldhl	sp,#(5 - 1)
   013C 5E                  350 	ld	e, (hl)
   013D 23                  351 	inc	hl
   013E 56                  352 	ld	d, (hl)
   013F 1A                  353 	ld	a,(de)
   0140 4F                  354 	ld	c, a
   0141 0D                  355 	dec	c
   0142 2B                  356 	dec	hl
   0143 2A                  357 	ld	a, (hl+)
   0144 66                  358 	ld	h, (hl)
   0145 6F                  359 	ld	l, a
   0146 71                  360 	ld	(hl), c
   0147 C3r4Dr05            361 	jp	00145$
   014A                     362 00102$:
                            363 ;SpriteEnemy.c:47: THIS->y++;	
   014A 03                  364 	inc	bc
   014B F8 0C               365 	ldhl	sp,	#12
   014D 2A                  366 	ld	a, (hl+)
   014E 66                  367 	ld	h, (hl)
   014F 6F                  368 	ld	l, a
   0150 71                  369 	ld	(hl), c
   0151 23                  370 	inc	hl
   0152 70                  371 	ld	(hl), b
                            372 ;SpriteEnemy.c:48: THIS->y++;
   0153 21r01r00            373 	ld	hl, #_THIS + 1
   0156 2B                  374 	dec	hl
   0157 4E                  375 	ld	c, (hl)
   0158 23                  376 	inc	hl
   0159 46                  377 	ld	b, (hl)
   015A 21 0A 00            378 	ld	hl, #0x000a
   015D 09                  379 	add	hl, bc
   015E 7D                  380 	ld	a, l
   015F 54                  381 	ld	d, h
   0160 F8 0F               382 	ldhl	sp,	#15
   0162 22                  383 	ld	(hl+), a
   0163 72                  384 	ld	(hl), d
   0164 2B                  385 	dec	hl
   0165 5E                  386 	ld	e, (hl)
   0166 23                  387 	inc	hl
   0167 56                  388 	ld	d, (hl)
   0168 1A                  389 	ld	a,(de)
   0169 4F                  390 	ld	c, a
   016A 13                  391 	inc	de
   016B 1A                  392 	ld	a,(de)
   016C 47                  393 	ld	b, a
   016D 03                  394 	inc	bc
   016E 2B                  395 	dec	hl
   016F 2A                  396 	ld	a, (hl+)
   0170 66                  397 	ld	h, (hl)
   0171 6F                  398 	ld	l, a
   0172 71                  399 	ld	(hl), c
   0173 23                  400 	inc	hl
   0174 70                  401 	ld	(hl), b
                            402 ;SpriteEnemy.c:50: return;
   0175 C3r4Dr05            403 	jp	00145$
   0178                     404 00105$:
                            405 ;SpriteEnemy.c:62: data->tile_e_collision = TranslateSprite(THIS, data->vx << delta_time, (data->enemy_accel_y >> 4)<< delta_time);
   0178 D1                  406 	pop	de
   0179 D5                  407 	push	de
   017A 21 03 00            408 	ld	hl, #0x0003
   017D 19                  409 	add	hl, de
   017E 7D                  410 	ld	a, l
   017F 54                  411 	ld	d, h
   0180 F8 06               412 	ldhl	sp,	#6
   0182 22                  413 	ld	(hl+), a
   0183 72                  414 	ld	(hl), d
                            415 ;SpriteEnemy.c:53: if (data->wait > 0u){
   0184 F8 10               416 	ldhl	sp,	#16
   0186 7E                  417 	ld	a, (hl)
   0187 B7                  418 	or	a, a
   0188 28 24               419 	jr	Z,00120$
                            420 ;SpriteEnemy.c:54: data->wait -= 1u;
   018A 4E                  421 	ld	c, (hl)
   018B 0D                  422 	dec	c
   018C F8 04               423 	ldhl	sp,	#4
   018E 2A                  424 	ld	a, (hl+)
   018F 66                  425 	ld	h, (hl)
   0190 6F                  426 	ld	l, a
   0191 71                  427 	ld	(hl), c
                            428 ;SpriteEnemy.c:55: if (data->wait == 0u){
   0192 79                  429 	ld	a, c
   0193 B7                  430 	or	a, a
   0194 C2rDFr02            431 	jp	NZ, 00121$
                            432 ;SpriteEnemy.c:56: SetSpriteAnim(THIS, enemy_walk, 8u);
   0197 3E 08               433 	ld	a, #0x08
   0199 F5                  434 	push	af
   019A 33                  435 	inc	sp
   019B 21rC6r00            436 	ld	hl, #_enemy_walk
   019E E5                  437 	push	hl
   019F 21r00r00            438 	ld	hl, #_THIS
   01A2 2A                  439 	ld	a, (hl+)
   01A3 66                  440 	ld	h, (hl)
   01A4 6F                  441 	ld	l, a
   01A5 E5                  442 	push	hl
   01A6 CDr00r00            443 	call	_SetSpriteAnim
   01A9 E8 05               444 	add	sp, #5
   01AB C3rDFr02            445 	jp	00121$
   01AE                     446 00120$:
                            447 ;SpriteEnemy.c:59: if(data->enemy_accel_y < 24) {
   01AE D1                  448 	pop	de
   01AF D5                  449 	push	de
   01B0 1A                  450 	ld	a,(de)
   01B1 4F                  451 	ld	c, a
   01B2 13                  452 	inc	de
   01B3 1A                  453 	ld	a,(de)
   01B4 47                  454 	ld	b, a
   01B5 79                  455 	ld	a, c
   01B6 D6 18               456 	sub	a, #0x18
   01B8 78                  457 	ld	a, b
   01B9 17                  458 	rla
   01BA 3F                  459 	ccf
   01BB 1F                  460 	rra
   01BC DE 80               461 	sbc	a, #0x80
   01BE 30 06               462 	jr	NC,00109$
                            463 ;SpriteEnemy.c:60: data->enemy_accel_y += 1;
   01C0 03                  464 	inc	bc
   01C1 E1                  465 	pop	hl
   01C2 E5                  466 	push	hl
   01C3 71                  467 	ld	(hl), c
   01C4 23                  468 	inc	hl
   01C5 70                  469 	ld	(hl), b
   01C6                     470 00109$:
                            471 ;SpriteEnemy.c:62: data->tile_e_collision = TranslateSprite(THIS, data->vx << delta_time, (data->enemy_accel_y >> 4)<< delta_time);
   01C6 D1                  472 	pop	de
   01C7 D5                  473 	push	de
   01C8 1A                  474 	ld	a,(de)
   01C9 4F                  475 	ld	c, a
   01CA 13                  476 	inc	de
   01CB 1A                  477 	ld	a,(de)
   01CC 47                  478 	ld	b, a
   01CD CB 28               479 	sra	b
   01CF CB 19               480 	rr	c
   01D1 CB 28               481 	sra	b
   01D3 CB 19               482 	rr	c
   01D5 CB 28               483 	sra	b
   01D7 CB 19               484 	rr	c
   01D9 CB 28               485 	sra	b
   01DB CB 19               486 	rr	c
   01DD F8 10               487 	ldhl	sp,	#16
   01DF 71                  488 	ld	(hl), c
   01E0 E5                  489 	push	hl
   01E1 21r00r00            490 	ld	hl, #_delta_time
   01E4 7E                  491 	ld	a, (hl)
   01E5 F8 0F               492 	ldhl	sp,	#15
   01E7 77                  493 	ld	(hl), a
   01E8 E1                  494 	pop	hl
   01E9 F8 0D               495 	ldhl	sp,	#13
   01EB 7E                  496 	ld	a, (hl)
   01EC F5                  497 	push	af
   01ED F8 12               498 	ldhl	sp,	#18
   01EF 3A                  499 	ld	a, (hl-)
   01F0 2B                  500 	dec	hl
   01F1 77                  501 	ld	(hl), a
   01F2 F1                  502 	pop	af
   01F3 3C                  503 	inc	a
   01F4 18 04               504 	jr	00255$
   01F6                     505 00254$:
   01F6 F8 0E               506 	ldhl	sp,	#14
   01F8 CB 26               507 	sla	(hl)
   01FA                     508 00255$:
   01FA 3D                  509 	dec	a
   01FB 20 F9               510 	jr	NZ,00254$
   01FD D1                  511 	pop	de
   01FE D5                  512 	push	de
   01FF 21 04 00            513 	ld	hl, #0x0004
   0202 19                  514 	add	hl, de
   0203 7D                  515 	ld	a, l
   0204 54                  516 	ld	d, h
   0205 F8 0F               517 	ldhl	sp,	#15
   0207 22                  518 	ld	(hl+), a
   0208 72                  519 	ld	(hl), d
   0209 2B                  520 	dec	hl
   020A 5E                  521 	ld	e, (hl)
   020B 23                  522 	inc	hl
   020C 56                  523 	ld	d, (hl)
   020D 1A                  524 	ld	a,(de)
   020E 47                  525 	ld	b, a
   020F F8 0D               526 	ldhl	sp,	#13
   0211 7E                  527 	ld	a, (hl)
   0212 3C                  528 	inc	a
   0213 18 02               529 	jr	00257$
   0215                     530 00256$:
   0215 CB 20               531 	sla	b
   0217                     532 00257$:
   0217 3D                  533 	dec	a
   0218 20 FB               534 	jr	NZ,00256$
   021A 23                  535 	inc	hl
   021B 7E                  536 	ld	a, (hl)
   021C F5                  537 	push	af
   021D 33                  538 	inc	sp
   021E C5                  539 	push	bc
   021F 33                  540 	inc	sp
   0220 21r00r00            541 	ld	hl, #_THIS
   0223 2A                  542 	ld	a, (hl+)
   0224 66                  543 	ld	h, (hl)
   0225 6F                  544 	ld	l, a
   0226 E5                  545 	push	hl
   0227 CDr00r00            546 	call	_TranslateSprite
   022A E8 04               547 	add	sp, #4
   022C 7B                  548 	ld	a, e
   022D F8 06               549 	ldhl	sp,	#6
   022F F5                  550 	push	af
   0230 2A                  551 	ld	a, (hl+)
   0231 66                  552 	ld	h, (hl)
   0232 6F                  553 	ld	l, a
   0233 F1                  554 	pop	af
   0234 77                  555 	ld	(hl), a
                            556 ;SpriteEnemy.c:64: if(!data->tile_e_collision && delta_time != 0 && data->enemy_accel_y < 24) { //Do another iteration if there is no collision
   0235 B7                  557 	or	a, a
   0236 C2r90r02            558 	jp	NZ, 00111$
   0239 21r00r00            559 	ld	hl, #_delta_time
   023C 7E                  560 	ld	a, (hl)
   023D B7                  561 	or	a, a
   023E CAr90r02            562 	jp	Z, 00111$
                            563 ;SpriteEnemy.c:59: if(data->enemy_accel_y < 24) {
   0241 D1                  564 	pop	de
   0242 D5                  565 	push	de
   0243 1A                  566 	ld	a,(de)
   0244 4F                  567 	ld	c, a
   0245 13                  568 	inc	de
   0246 1A                  569 	ld	a,(de)
   0247 47                  570 	ld	b, a
                            571 ;SpriteEnemy.c:64: if(!data->tile_e_collision && delta_time != 0 && data->enemy_accel_y < 24) { //Do another iteration if there is no collision
   0248 79                  572 	ld	a, c
   0249 D6 18               573 	sub	a, #0x18
   024B 78                  574 	ld	a, b
   024C 17                  575 	rla
   024D 3F                  576 	ccf
   024E 1F                  577 	rra
   024F DE 80               578 	sbc	a, #0x80
   0251 D2r90r02            579 	jp	NC, 00111$
                            580 ;SpriteEnemy.c:65: data->enemy_accel_y += 2;
   0254 03                  581 	inc	bc
   0255 03                  582 	inc	bc
   0256 E1                  583 	pop	hl
   0257 E5                  584 	push	hl
   0258 71                  585 	ld	(hl), c
   0259 23                  586 	inc	hl
   025A 70                  587 	ld	(hl), b
                            588 ;SpriteEnemy.c:66: data->tile_e_collision = TranslateSprite(THIS, 0, (data->enemy_accel_y >> 4) << delta_time);
   025B CB 28               589 	sra	b
   025D CB 19               590 	rr	c
   025F CB 28               591 	sra	b
   0261 CB 19               592 	rr	c
   0263 CB 28               593 	sra	b
   0265 CB 19               594 	rr	c
   0267 CB 28               595 	sra	b
   0269 CB 19               596 	rr	c
   026B 21r00r00            597 	ld	hl, #_delta_time
   026E 7E                  598 	ld	a, (hl)
   026F 3C                  599 	inc	a
   0270 18 02               600 	jr	00259$
   0272                     601 00258$:
   0272 CB 21               602 	sla	c
   0274                     603 00259$:
   0274 3D                  604 	dec	a
   0275 20 FB               605 	jr	NZ,00258$
   0277 79                  606 	ld	a, c
   0278 F5                  607 	push	af
   0279 33                  608 	inc	sp
   027A AF                  609 	xor	a, a
   027B F5                  610 	push	af
   027C 33                  611 	inc	sp
   027D 21r00r00            612 	ld	hl, #_THIS
   0280 2A                  613 	ld	a, (hl+)
   0281 66                  614 	ld	h, (hl)
   0282 6F                  615 	ld	l, a
   0283 E5                  616 	push	hl
   0284 CDr00r00            617 	call	_TranslateSprite
   0287 E8 04               618 	add	sp, #4
   0289 4B                  619 	ld	c, e
   028A F8 06               620 	ldhl	sp,	#6
   028C 2A                  621 	ld	a, (hl+)
   028D 66                  622 	ld	h, (hl)
   028E 6F                  623 	ld	l, a
   028F 71                  624 	ld	(hl), c
   0290                     625 00111$:
                            626 ;SpriteEnemy.c:68: if(data->tile_e_collision) {
   0290 F8 06               627 	ldhl	sp,#(7 - 1)
   0292 5E                  628 	ld	e, (hl)
   0293 23                  629 	inc	hl
   0294 56                  630 	ld	d, (hl)
   0295 1A                  631 	ld	a,(de)
   0296 B7                  632 	or	a, a
   0297 CArDFr02            633 	jp	Z, 00121$
                            634 ;SpriteEnemy.c:69: if(data->enemy_state == ENEMY_STATE_JUMPING & data->enemy_accel_y > 0) {
   029A F8 02               635 	ldhl	sp,#(3 - 1)
   029C 5E                  636 	ld	e, (hl)
   029D 23                  637 	inc	hl
   029E 56                  638 	ld	d, (hl)
   029F 1A                  639 	ld	a,(de)
   02A0 3D                  640 	dec	a
   02A1 3E 01               641 	ld	a, #0x01
   02A3 28 01               642 	jr	Z,00261$
   02A5 AF                  643 	xor	a, a
   02A6                     644 00261$:
   02A6 F8 10               645 	ldhl	sp,	#16
   02A8 77                  646 	ld	(hl), a
   02A9 D1                  647 	pop	de
   02AA D5                  648 	push	de
   02AB 1A                  649 	ld	a,(de)
   02AC 4F                  650 	ld	c, a
   02AD 13                  651 	inc	de
   02AE 1A                  652 	ld	a,(de)
   02AF 47                  653 	ld	b,a
   02B0 5F                  654 	ld	e, a
   02B1 3E 00               655 	ld	a, #0x00
   02B3 57                  656 	ld	d, a
   02B4 AF                  657 	xor	a, a
   02B5 B9                  658 	cp	a, c
   02B6 98                  659 	sbc	a, b
   02B7 CB 7B               660 	bit	7, e
   02B9 28 07               661 	jr	Z,00262$
   02BB CB 7A               662 	bit	7, d
   02BD 20 08               663 	jr	NZ,00263$
   02BF BF                  664 	cp	a, a
   02C0 18 05               665 	jr	00263$
   02C2                     666 00262$:
   02C2 CB 7A               667 	bit	7, d
   02C4 28 01               668 	jr	Z,00263$
   02C6 37                  669 	scf
   02C7                     670 00263$:
   02C7 3E 00               671 	ld	a, #0x00
   02C9 17                  672 	rla
   02CA F8 10               673 	ldhl	sp,	#16
   02CC A6                  674 	and	a,(hl)
   02CD 28 08               675 	jr	Z,00115$
                            676 ;SpriteEnemy.c:70: data->enemy_state = ENEMY_STATE_NORMAL;
   02CF C1                  677 	pop	bc
   02D0 E1                  678 	pop	hl
   02D1 E5                  679 	push	hl
   02D2 C5                  680 	push	bc
   02D3 36 00               681 	ld	(hl), #0x00
   02D5 18 05               682 	jr	00116$
   02D7                     683 00115$:
                            684 ;SpriteEnemy.c:72: data->enemy_accel_y = 0;	
   02D7 E1                  685 	pop	hl
   02D8 E5                  686 	push	hl
   02D9 AF                  687 	xor	a, a
   02DA 22                  688 	ld	(hl+), a
   02DB 77                  689 	ld	(hl), a
   02DC                     690 00116$:
                            691 ;SpriteEnemy.c:74: CheckCollisionETile();
   02DC CDr50r05            692 	call	_CheckCollisionETile
   02DF                     693 00121$:
                            694 ;SpriteEnemy.c:82: SPRITEMANAGER_ITERATE(scroll_e_tile, iespr) {
   02DF FAr01r00            695 	ld	a, (#(_sprite_manager_updatables + 0x0001) + 0)
   02E2 4F                  696 	ld	c, a
   02E3 06 00               697 	ld	b, #0x00
   02E5 CB 21               698 	sla	c
   02E7 CB 10               699 	rl	b
   02E9 21r00r00            700 	ld	hl, #_sprite_manager_sprites
   02EC 09                  701 	add	hl, bc
   02ED 4D                  702 	ld	c, l
   02EE 44                  703 	ld	b, h
   02EF 59                  704 	ld	e, c
   02F0 50                  705 	ld	d, b
   02F1 1A                  706 	ld	a,(de)
   02F2 F8 08               707 	ldhl	sp,	#8
   02F4 22                  708 	ld	(hl+), a
   02F5 13                  709 	inc	de
   02F6 1A                  710 	ld	a, (de)
   02F7 77                  711 	ld	(hl), a
   02F8 AF                  712 	xor	a, a
   02F9 F8 10               713 	ldhl	sp,	#16
   02FB 77                  714 	ld	(hl), a
   02FC                     715 00143$:
   02FC 21r00r00            716 	ld	hl, #_sprite_manager_updatables + 0
   02FF 4E                  717 	ld	c, (hl)
   0300 F8 10               718 	ldhl	sp,	#16
   0302 7E                  719 	ld	a, (hl)
   0303 91                  720 	sub	a, c
   0304 CAr4Dr05            721 	jp	Z,00145$
                            722 ;SpriteEnemy.c:83: if(iespr->type == SpritePlayer) {
   0307 F8 08               723 	ldhl	sp,#(9 - 1)
   0309 5E                  724 	ld	e, (hl)
   030A 23                  725 	inc	hl
   030B 56                  726 	ld	d, (hl)
   030C 21 11 00            727 	ld	hl, #0x0011
   030F 19                  728 	add	hl, de
   0310 7D                  729 	ld	a, l
   0311 54                  730 	ld	d, h
   0312 F8 0E               731 	ldhl	sp,	#14
   0314 22                  732 	ld	(hl+), a
   0315 72                  733 	ld	(hl), d
   0316 2B                  734 	dec	hl
   0317 5E                  735 	ld	e, (hl)
   0318 23                  736 	inc	hl
   0319 56                  737 	ld	d, (hl)
   031A 1A                  738 	ld	a,(de)
   031B B7                  739 	or	a, a
   031C 20 1D               740 	jr	NZ,00125$
                            741 ;SpriteEnemy.c:84: if(CheckCollision(THIS, iespr)) {
   031E F8 08               742 	ldhl	sp,	#8
   0320 2A                  743 	ld	a, (hl+)
   0321 66                  744 	ld	h, (hl)
   0322 6F                  745 	ld	l, a
   0323 E5                  746 	push	hl
   0324 21r00r00            747 	ld	hl, #_THIS
   0327 2A                  748 	ld	a, (hl+)
   0328 66                  749 	ld	h, (hl)
   0329 6F                  750 	ld	l, a
   032A E5                  751 	push	hl
   032B CDr00r00            752 	call	_CheckCollision
   032E E8 04               753 	add	sp, #4
   0330 7B                  754 	ld	a, e
   0331 B7                  755 	or	a, a
   0332 28 07               756 	jr	Z,00125$
                            757 ;SpriteEnemy.c:85: data->wait = 24u;
   0334 F8 04               758 	ldhl	sp,	#4
   0336 2A                  759 	ld	a, (hl+)
   0337 66                  760 	ld	h, (hl)
   0338 6F                  761 	ld	l, a
   0339 36 18               762 	ld	(hl), #0x18
   033B                     763 00125$:
                            764 ;SpriteEnemy.c:88: if(iespr->type == SpriteArrow) {
   033B F8 0E               765 	ldhl	sp,#(15 - 1)
   033D 5E                  766 	ld	e, (hl)
   033E 23                  767 	inc	hl
   033F 56                  768 	ld	d, (hl)
   0340 1A                  769 	ld	a,(de)
   0341 3D                  770 	dec	a
   0342 C2r27r05            771 	jp	NZ,00144$
                            772 ;SpriteEnemy.c:89: if(CheckCollision(THIS, iespr)) {
   0345 F8 08               773 	ldhl	sp,	#8
   0347 2A                  774 	ld	a, (hl+)
   0348 66                  775 	ld	h, (hl)
   0349 6F                  776 	ld	l, a
   034A E5                  777 	push	hl
   034B 21r00r00            778 	ld	hl, #_THIS
   034E 2A                  779 	ld	a, (hl+)
   034F 66                  780 	ld	h, (hl)
   0350 6F                  781 	ld	l, a
   0351 E5                  782 	push	hl
   0352 CDr00r00            783 	call	_CheckCollision
   0355 E8 04               784 	add	sp, #4
   0357 7B                  785 	ld	a, e
   0358 B7                  786 	or	a, a
   0359 CAr27r05            787 	jp	Z, 00144$
                            788 ;SpriteEnemy.c:90: struct ArrowInfo* arrowdata = (struct ArrowInfo*)iespr->custom_data;
   035C F8 08               789 	ldhl	sp,#(9 - 1)
   035E 5E                  790 	ld	e, (hl)
   035F 23                  791 	inc	hl
   0360 56                  792 	ld	d, (hl)
   0361 21 19 00            793 	ld	hl, #0x0019
   0364 19                  794 	add	hl, de
   0365 4D                  795 	ld	c, l
   0366 7C                  796 	ld	a, h
   0367 47                  797 	ld	b, a
                            798 ;SpriteEnemy.c:91: if (arrowdata->type == 6u){ //spine from porcupine
   0368 59                  799 	ld	e, c
   0369 50                  800 	ld	d, b
   036A 6B                  801 	ld	l, e
   036B 62                  802 	ld	h, d
   036C 7E                  803 	ld	a, (hl)
   036D E6 0F               804 	and	a, #0x0f
   036F D6 06               805 	sub	a, #0x06
   0371 CAr4Dr05            806 	jp	Z,00145$
   0374 18 03               807 	jr	00127$
                            808 ;SpriteEnemy.c:92: return;
   0376 C3r4Dr05            809 	jp	00145$
   0379                     810 00127$:
                            811 ;SpriteEnemy.c:94: data->wait = 24u;
   0379 F8 04               812 	ldhl	sp,	#4
   037B 2A                  813 	ld	a, (hl+)
   037C 66                  814 	ld	h, (hl)
   037D 6F                  815 	ld	l, a
   037E 36 18               816 	ld	(hl), #0x18
                            817 ;SpriteEnemy.c:95: SetSpriteAnim(THIS, enemy_hit, 24u); 
   0380 C5                  818 	push	bc
   0381 3E 18               819 	ld	a, #0x18
   0383 F5                  820 	push	af
   0384 33                  821 	inc	sp
   0385 21rC9r00            822 	ld	hl, #_enemy_hit
   0388 E5                  823 	push	hl
   0389 21r00r00            824 	ld	hl, #_THIS
   038C 2A                  825 	ld	a, (hl+)
   038D 66                  826 	ld	h, (hl)
   038E 6F                  827 	ld	l, a
   038F E5                  828 	push	hl
   0390 CDr00r00            829 	call	_SetSpriteAnim
   0393 E8 05               830 	add	sp, #5
   0395 C1                  831 	pop	bc
                            832 ;SpriteEnemy.c:96: data->hp -= arrowdata->arrowdamage;
   0396 D1                  833 	pop	de
   0397 D5                  834 	push	de
   0398 21 07 00            835 	ld	hl, #0x0007
   039B 19                  836 	add	hl, de
   039C 7D                  837 	ld	a, l
   039D 54                  838 	ld	d, h
   039E F8 0A               839 	ldhl	sp,	#10
   03A0 22                  840 	ld	(hl+), a
   03A1 72                  841 	ld	(hl), d
   03A2 2B                  842 	dec	hl
   03A3 5E                  843 	ld	e, (hl)
   03A4 23                  844 	inc	hl
   03A5 56                  845 	ld	d, (hl)
   03A6 1A                  846 	ld	a,(de)
   03A7 F8 0F               847 	ldhl	sp,	#15
   03A9 77                  848 	ld	(hl), a
   03AA 03                  849 	inc	bc
   03AB 03                  850 	inc	bc
   03AC 03                  851 	inc	bc
   03AD 03                  852 	inc	bc
   03AE 0A                  853 	ld	a, (bc)
   03AF 4F                  854 	ld	c, a
   03B0 7E                  855 	ld	a, (hl)
   03B1 91                  856 	sub	a, c
   03B2 4F                  857 	ld	c, a
   03B3 F8 0A               858 	ldhl	sp,	#10
   03B5 2A                  859 	ld	a, (hl+)
   03B6 66                  860 	ld	h, (hl)
   03B7 6F                  861 	ld	l, a
   03B8 71                  862 	ld	(hl), c
                            863 ;SpriteEnemy.c:40: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   03B9 21r01r00            864 	ld	hl, #_THIS + 1
   03BC 2B                  865 	dec	hl
   03BD 4E                  866 	ld	c, (hl)
   03BE 23                  867 	inc	hl
   03BF 46                  868 	ld	b, (hl)
                            869 ;SpriteEnemy.c:97: if (THIS->x < iespr->x){ //se la freccia arriva dalla destra dell' enemy
   03C0 21 08 00            870 	ld	hl, #0x0008
   03C3 09                  871 	add	hl, bc
   03C4 7D                  872 	ld	a, l
   03C5 54                  873 	ld	d, h
   03C6 F8 0E               874 	ldhl	sp,	#14
   03C8 22                  875 	ld	(hl+), a
   03C9 72                  876 	ld	(hl), d
   03CA 2B                  877 	dec	hl
   03CB 5E                  878 	ld	e, (hl)
   03CC 23                  879 	inc	hl
   03CD 56                  880 	ld	d, (hl)
   03CE 1A                  881 	ld	a,(de)
   03CF F8 0C               882 	ldhl	sp,	#12
   03D1 22                  883 	ld	(hl+), a
   03D2 13                  884 	inc	de
   03D3 1A                  885 	ld	a, (de)
   03D4 77                  886 	ld	(hl), a
   03D5 F8 08               887 	ldhl	sp,#(9 - 1)
   03D7 5E                  888 	ld	e, (hl)
   03D8 23                  889 	inc	hl
   03D9 56                  890 	ld	d, (hl)
   03DA 21 08 00            891 	ld	hl, #0x0008
   03DD 19                  892 	add	hl, de
   03DE 7D                  893 	ld	a, l
   03DF 54                  894 	ld	d, h
   03E0 F8 0E               895 	ldhl	sp,	#14
   03E2 22                  896 	ld	(hl+), a
   03E3 72                  897 	ld	(hl), d
   03E4 2B                  898 	dec	hl
   03E5 5E                  899 	ld	e, (hl)
   03E6 23                  900 	inc	hl
   03E7 56                  901 	ld	d, (hl)
   03E8 1A                  902 	ld	a,(de)
   03E9 2B                  903 	dec	hl
   03EA 22                  904 	ld	(hl+), a
   03EB 13                  905 	inc	de
   03EC 1A                  906 	ld	a, (de)
   03ED 77                  907 	ld	(hl), a
                            908 ;SpriteEnemy.c:98: if (SPRITE_GET_VMIRROR(THIS)){ // se sto andando a sinistra, l'ho preso da dietro! turn!
   03EE 21 0C 00            909 	ld	hl, #0x000c
   03F1 09                  910 	add	hl, bc
   03F2 4D                  911 	ld	c, l
   03F3 44                  912 	ld	b, h
   03F4 0A                  913 	ld	a, (bc)
   03F5 E6 20               914 	and	a, #0x20
   03F7 4F                  915 	ld	c, a
   03F8 06 00               916 	ld	b, #0x00
                            917 ;SpriteEnemy.c:97: if (THIS->x < iespr->x){ //se la freccia arriva dalla destra dell' enemy
   03FA F8 0C               918 	ldhl	sp,	#12
   03FC 5D                  919 	ld	e, l
   03FD 54                  920 	ld	d, h
   03FE F8 0E               921 	ldhl	sp,	#14
   0400 1A                  922 	ld	a, (de)
   0401 96                  923 	sub	a, (hl)
   0402 23                  924 	inc	hl
   0403 13                  925 	inc	de
   0404 1A                  926 	ld	a, (de)
   0405 9E                  927 	sbc	a, (hl)
   0406 D2r4Fr04            928 	jp	NC, 00133$
                            929 ;SpriteEnemy.c:98: if (SPRITE_GET_VMIRROR(THIS)){ // se sto andando a sinistra, l'ho preso da dietro! turn!
   0409 78                  930 	ld	a, b
   040A B1                  931 	or	a, c
   040B 28 03               932 	jr	Z,00129$
                            933 ;SpriteEnemy.c:99: ETurn();
   040D CDr7Fr05            934 	call	_ETurn
   0410                     935 00129$:
                            936 ;SpriteEnemy.c:101: data->tile_e_collision = TranslateSprite(THIS, -4 << delta_time, (data->enemy_accel_y >> 4));
   0410 D1                  937 	pop	de
   0411 D5                  938 	push	de
   0412 1A                  939 	ld	a,(de)
   0413 47                  940 	ld	b, a
   0414 13                  941 	inc	de
   0415 1A                  942 	ld	a,(de)
   0416 4F                  943 	ld	c, a
   0417 CB 29               944 	sra	c
   0419 CB 18               945 	rr	b
   041B CB 29               946 	sra	c
   041D CB 18               947 	rr	b
   041F CB 29               948 	sra	c
   0421 CB 18               949 	rr	b
   0423 CB 29               950 	sra	c
   0425 CB 18               951 	rr	b
   0427 21r00r00            952 	ld	hl, #_delta_time
   042A 4E                  953 	ld	c, (hl)
   042B 16 FC               954 	ld	d, #0xfc
   042D 0C                  955 	inc	c
   042E 18 02               956 	jr	00272$
   0430                     957 00271$:
   0430 CB 22               958 	sla	d
   0432                     959 00272$:
   0432 0D                  960 	dec	c
   0433 20 FB               961 	jr	NZ,00271$
   0435 C5                  962 	push	bc
   0436 33                  963 	inc	sp
   0437 D5                  964 	push	de
   0438 33                  965 	inc	sp
   0439 21r00r00            966 	ld	hl, #_THIS
   043C 2A                  967 	ld	a, (hl+)
   043D 66                  968 	ld	h, (hl)
   043E 6F                  969 	ld	l, a
   043F E5                  970 	push	hl
   0440 CDr00r00            971 	call	_TranslateSprite
   0443 E8 04               972 	add	sp, #4
   0445 4B                  973 	ld	c, e
   0446 F8 06               974 	ldhl	sp,	#6
   0448 2A                  975 	ld	a, (hl+)
   0449 66                  976 	ld	h, (hl)
   044A 6F                  977 	ld	l, a
   044B 71                  978 	ld	(hl), c
   044C C3r93r04            979 	jp	00134$
   044F                     980 00133$:
                            981 ;SpriteEnemy.c:103: if (!SPRITE_GET_VMIRROR(THIS)){ // se sto andando a destra, l'ho preso da dietro! turn!
   044F 78                  982 	ld	a, b
   0450 B1                  983 	or	a, c
   0451 20 03               984 	jr	NZ,00131$
                            985 ;SpriteEnemy.c:104: ETurn();
   0453 CDr7Fr05            986 	call	_ETurn
   0456                     987 00131$:
                            988 ;SpriteEnemy.c:106: data->tile_e_collision = TranslateSprite(THIS, 4 << delta_time, (data->enemy_accel_y >> 4));
   0456 D1                  989 	pop	de
   0457 D5                  990 	push	de
   0458 1A                  991 	ld	a,(de)
   0459 4F                  992 	ld	c, a
   045A 13                  993 	inc	de
   045B 1A                  994 	ld	a,(de)
   045C 47                  995 	ld	b, a
   045D CB 28               996 	sra	b
   045F CB 19               997 	rr	c
   0461 CB 28               998 	sra	b
   0463 CB 19               999 	rr	c
   0465 CB 28              1000 	sra	b
   0467 CB 19              1001 	rr	c
   0469 CB 28              1002 	sra	b
   046B CB 19              1003 	rr	c
   046D 21r00r00           1004 	ld	hl, #_delta_time
   0470 46                 1005 	ld	b, (hl)
   0471 16 04              1006 	ld	d, #0x04
   0473 04                 1007 	inc	b
   0474 18 02              1008 	jr	00274$
   0476                    1009 00273$:
   0476 CB 22              1010 	sla	d
   0478                    1011 00274$:
   0478 05                 1012 	dec	b
   0479 20 FB              1013 	jr	NZ,00273$
   047B 79                 1014 	ld	a, c
   047C F5                 1015 	push	af
   047D 33                 1016 	inc	sp
   047E D5                 1017 	push	de
   047F 33                 1018 	inc	sp
   0480 21r00r00           1019 	ld	hl, #_THIS
   0483 2A                 1020 	ld	a, (hl+)
   0484 66                 1021 	ld	h, (hl)
   0485 6F                 1022 	ld	l, a
   0486 E5                 1023 	push	hl
   0487 CDr00r00           1024 	call	_TranslateSprite
   048A E8 04              1025 	add	sp, #4
   048C 4B                 1026 	ld	c, e
   048D F8 06              1027 	ldhl	sp,	#6
   048F 2A                 1028 	ld	a, (hl+)
   0490 66                 1029 	ld	h, (hl)
   0491 6F                 1030 	ld	l, a
   0492 71                 1031 	ld	(hl), c
   0493                    1032 00134$:
                           1033 ;SpriteEnemy.c:108: SpriteManagerRemoveSprite(iespr);
   0493 F8 08              1034 	ldhl	sp,	#8
   0495 2A                 1035 	ld	a, (hl+)
   0496 66                 1036 	ld	h, (hl)
   0497 6F                 1037 	ld	l, a
   0498 E5                 1038 	push	hl
   0499 CDr00r00           1039 	call	_SpriteManagerRemoveSprite
   049C E8 02              1040 	add	sp, #2
                           1041 ;SpriteEnemy.c:109: if (data->hp <= 0){
   049E F8 0A              1042 	ldhl	sp,#(11 - 1)
   04A0 5E                 1043 	ld	e, (hl)
   04A1 23                 1044 	inc	hl
   04A2 56                 1045 	ld	d, (hl)
   04A3 1A                 1046 	ld	a,(de)
   04A4 4F                 1047 	ld	c,a
   04A5 5F                 1048 	ld	e, a
   04A6 3E 00              1049 	ld	a, #0x00
   04A8 57                 1050 	ld	d, a
   04A9 AF                 1051 	xor	a, a
   04AA 91                 1052 	sub	a, c
   04AB CB 7B              1053 	bit	7, e
   04AD 28 07              1054 	jr	Z,00275$
   04AF CB 7A              1055 	bit	7, d
   04B1 20 08              1056 	jr	NZ,00276$
   04B3 BF                 1057 	cp	a, a
   04B4 18 05              1058 	jr	00276$
   04B6                    1059 00275$:
   04B6 CB 7A              1060 	bit	7, d
   04B8 28 01              1061 	jr	Z,00276$
   04BA 37                 1062 	scf
   04BB                    1063 00276$:
   04BB DAr27r05           1064 	jp	C, 00144$
                           1065 ;SpriteEnemy.c:110: NR50_REG = 0x55; //Max volume		
   04BE 3E 55              1066 	ld	a, #0x55
   04C0 E0r00              1067 	ldh	(_NR50_REG+0),a
                           1068 ;SpriteEnemy.c:111: PlayFx(CHANNEL_1, 5, 0x4b, 0xc2, 0x43, 0x68, 0x86);
   04C2 21 86 00           1069 	ld	hl, #0x0086
   04C5 E5                 1070 	push	hl
   04C6 2E 68              1071 	ld	l, #0x68
   04C8 E5                 1072 	push	hl
   04C9 2E 43              1073 	ld	l, #0x43
   04CB E5                 1074 	push	hl
   04CC 2E C2              1075 	ld	l, #0xc2
   04CE E5                 1076 	push	hl
   04CF 2E 4B              1077 	ld	l, #0x4b
   04D1 E5                 1078 	push	hl
   04D2 3E 05              1079 	ld	a, #0x05
   04D4 F5                 1080 	push	af
   04D5 33                 1081 	inc	sp
   04D6 AF                 1082 	xor	a, a
   04D7 F5                 1083 	push	af
   04D8 33                 1084 	inc	sp
   04D9 CDr00r00           1085 	call	_PlayFx
   04DC E8 0C              1086 	add	sp, #12
                           1087 ;SpriteEnemy.c:112: data->enemy_state = ENEMY_STATE_DEAD;
   04DE C1                 1088 	pop	bc
   04DF E1                 1089 	pop	hl
   04E0 E5                 1090 	push	hl
   04E1 C5                 1091 	push	bc
   04E2 36 03              1092 	ld	(hl), #0x03
                           1093 ;SpriteEnemy.c:113: SetSpriteAnim(THIS, enemy_dead, 16u);
   04E4 3E 10              1094 	ld	a, #0x10
   04E6 F5                 1095 	push	af
   04E7 33                 1096 	inc	sp
   04E8 21rCDr00           1097 	ld	hl, #_enemy_dead
   04EB E5                 1098 	push	hl
   04EC 21r00r00           1099 	ld	hl, #_THIS
   04EF 2A                 1100 	ld	a, (hl+)
   04F0 66                 1101 	ld	h, (hl)
   04F1 6F                 1102 	ld	l, a
   04F2 E5                 1103 	push	hl
   04F3 CDr00r00           1104 	call	_SetSpriteAnim
   04F6 E8 05              1105 	add	sp, #5
                           1106 ;SpriteEnemy.c:114: data->wait = 8u;
   04F8 F8 04              1107 	ldhl	sp,	#4
   04FA 2A                 1108 	ld	a, (hl+)
   04FB 66                 1109 	ld	h, (hl)
   04FC 6F                 1110 	ld	l, a
   04FD 36 08              1111 	ld	(hl), #0x08
                           1112 ;SpriteEnemy.c:115: THIS->lim_x = 8u;
   04FF 21r00r00           1113 	ld	hl, #_THIS
   0502 46                 1114 	ld	b, (hl)
   0503 23                 1115 	inc	hl
   0504 4E                 1116 	ld	c, (hl)
   0505 78                 1117 	ld	a, b
   0506 C6 13              1118 	add	a, #0x13
   0508 47                 1119 	ld	b, a
   0509 30 01              1120 	jr	NC,00277$
   050B 0C                 1121 	inc	c
   050C                    1122 00277$:
   050C 68                 1123 	ld	l, b
   050D 61                 1124 	ld	h, c
   050E 36 08              1125 	ld	(hl), #0x08
   0510 23                 1126 	inc	hl
   0511 36 00              1127 	ld	(hl), #0x00
                           1128 ;SpriteEnemy.c:116: THIS->lim_y = 16u;
   0513 21r00r00           1129 	ld	hl, #_THIS
   0516 46                 1130 	ld	b, (hl)
   0517 23                 1131 	inc	hl
   0518 4E                 1132 	ld	c, (hl)
   0519 78                 1133 	ld	a, b
   051A C6 15              1134 	add	a, #0x15
   051C 47                 1135 	ld	b, a
   051D 30 01              1136 	jr	NC,00278$
   051F 0C                 1137 	inc	c
   0520                    1138 00278$:
   0520 68                 1139 	ld	l, b
   0521 61                 1140 	ld	h, c
   0522 36 10              1141 	ld	(hl), #0x10
   0524 23                 1142 	inc	hl
   0525 36 00              1143 	ld	(hl), #0x00
   0527                    1144 00144$:
                           1145 ;SpriteEnemy.c:82: SPRITEMANAGER_ITERATE(scroll_e_tile, iespr) {
   0527 F8 10              1146 	ldhl	sp,	#16
   0529 34                 1147 	inc	(hl)
   052A 4E                 1148 	ld	c, (hl)
   052B 06 00              1149 	ld	b, #0x00
   052D 03                 1150 	inc	bc
   052E 21r00r00           1151 	ld	hl, #_sprite_manager_updatables
   0531 09                 1152 	add	hl, bc
   0532 4D                 1153 	ld	c,l
   0533 7C                 1154 	ld	a,h
   0534 4E                 1155 	ld	c, (hl)
   0535 06 00              1156 	ld	b, #0x00
   0537 CB 21              1157 	sla	c
   0539 CB 10              1158 	rl	b
   053B 21r00r00           1159 	ld	hl, #_sprite_manager_sprites
   053E 09                 1160 	add	hl, bc
   053F 4D                 1161 	ld	c, l
   0540 44                 1162 	ld	b, h
   0541 59                 1163 	ld	e, c
   0542 50                 1164 	ld	d, b
   0543 1A                 1165 	ld	a,(de)
   0544 F8 08              1166 	ldhl	sp,	#8
   0546 22                 1167 	ld	(hl+), a
   0547 13                 1168 	inc	de
   0548 1A                 1169 	ld	a, (de)
   0549 77                 1170 	ld	(hl), a
   054A C3rFCr02           1171 	jp	00143$
   054D                    1172 00145$:
                           1173 ;SpriteEnemy.c:122: }
   054D E8 11              1174 	add	sp, #17
   054F C9                 1175 	ret
                           1176 ;SpriteEnemy.c:124: void CheckCollisionETile() {
                           1177 ;	---------------------------------
                           1178 ; Function CheckCollisionETile
                           1179 ; ---------------------------------
   0550                    1180 _CheckCollisionETile::
                           1181 ;SpriteEnemy.c:125: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0550 21r01r00           1182 	ld	hl, #_THIS + 1
   0553 2B                 1183 	dec	hl
   0554 4E                 1184 	ld	c, (hl)
   0555 23                 1185 	inc	hl
   0556 46                 1186 	ld	b, (hl)
   0557 21 19 00           1187 	ld	hl, #0x0019
   055A 09                 1188 	add	hl, bc
   055B 4D                 1189 	ld	c, l
   055C 7C                 1190 	ld	a, h
   055D 47                 1191 	ld	b, a
                           1192 ;SpriteEnemy.c:126: switch(data->tile_e_collision) {
   055E 03                 1193 	inc	bc
   055F 03                 1194 	inc	bc
   0560 03                 1195 	inc	bc
   0561 78                 1196 	ld	a, b
   0562 69                 1197 	ld	l, c
   0563 67                 1198 	ld	h, a
   0564 7E                 1199 	ld	a, (hl)
   0565 FE 04              1200 	cp	a, #0x04
   0567 28 13              1201 	jr	Z,00106$
   0569 FE 05              1202 	cp	a, #0x05
   056B 28 0F              1203 	jr	Z,00106$
   056D FE 06              1204 	cp	a, #0x06
   056F 28 0B              1205 	jr	Z,00106$
   0571 FE 07              1206 	cp	a, #0x07
   0573 28 07              1207 	jr	Z,00106$
   0575 FE 12              1208 	cp	a, #0x12
   0577 28 03              1209 	jr	Z,00106$
   0579 D6 13              1210 	sub	a, #0x13
   057B C0                 1211 	ret	NZ
                           1212 ;SpriteEnemy.c:132: case 19u:
   057C                    1213 00106$:
                           1214 ;SpriteEnemy.c:133: ETurn();
                           1215 ;SpriteEnemy.c:135: }
                           1216 ;SpriteEnemy.c:136: }
   057C C3r7Fr05           1217 	jp	_ETurn
                           1218 ;SpriteEnemy.c:138: void ETurn(){
                           1219 ;	---------------------------------
                           1220 ; Function ETurn
                           1221 ; ---------------------------------
   057F                    1222 _ETurn::
   057F E8 F8              1223 	add	sp, #-8
                           1224 ;SpriteEnemy.c:139: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0581 21r01r00           1225 	ld	hl, #_THIS + 1
   0584 2B                 1226 	dec	hl
   0585 4E                 1227 	ld	c, (hl)
   0586 23                 1228 	inc	hl
   0587 46                 1229 	ld	b, (hl)
   0588 21 19 00           1230 	ld	hl, #0x0019
   058B 09                 1231 	add	hl, bc
   058C 7D                 1232 	ld	a, l
   058D 54                 1233 	ld	d, h
   058E F8 06              1234 	ldhl	sp,	#6
   0590 22                 1235 	ld	(hl+), a
   0591 72                 1236 	ld	(hl), d
   0592 2B                 1237 	dec	hl
   0593 2A                 1238 	ld	a, (hl+)
   0594 5E                 1239 	ld	e, (hl)
   0595 F8 00              1240 	ldhl	sp,	#0
   0597 22                 1241 	ld	(hl+), a
   0598 73                 1242 	ld	(hl), e
                           1243 ;SpriteEnemy.c:140: if (data->vx == 1){
   0599 D1                 1244 	pop	de
   059A D5                 1245 	push	de
   059B 21 04 00           1246 	ld	hl, #0x0004
   059E 19                 1247 	add	hl, de
   059F 7D                 1248 	ld	a, l
   05A0 54                 1249 	ld	d, h
   05A1 F8 02              1250 	ldhl	sp,	#2
   05A3 22                 1251 	ld	(hl+), a
   05A4 72                 1252 	ld	(hl), d
   05A5 2B                 1253 	dec	hl
   05A6 5E                 1254 	ld	e, (hl)
   05A7 23                 1255 	inc	hl
   05A8 56                 1256 	ld	d, (hl)
   05A9 1A                 1257 	ld	a,(de)
   05AA F8 07              1258 	ldhl	sp,	#7
   05AC 77                 1259 	ld	(hl), a
                           1260 ;SpriteEnemy.c:143: data->wait = 48u;
   05AD D1                 1261 	pop	de
   05AE D5                 1262 	push	de
   05AF 21 05 00           1263 	ld	hl, #0x0005
   05B2 19                 1264 	add	hl, de
   05B3 7D                 1265 	ld	a, l
   05B4 54                 1266 	ld	d, h
   05B5 F8 04              1267 	ldhl	sp,	#4
   05B7 22                 1268 	ld	(hl+), a
   05B8 72                 1269 	ld	(hl), d
                           1270 ;SpriteEnemy.c:140: if (data->vx == 1){
   05B9 23                 1271 	inc	hl
   05BA 23                 1272 	inc	hl
   05BB 7E                 1273 	ld	a, (hl)
   05BC 3D                 1274 	dec	a
   05BD C2rFAr05           1275 	jp	NZ,00102$
                           1276 ;SpriteEnemy.c:141: SPRITE_SET_VMIRROR(THIS);
   05C0 21 0C 00           1277 	ld	hl, #0x000c
   05C3 09                 1278 	add	hl, bc
   05C4 4D                 1279 	ld	c, l
   05C5 44                 1280 	ld	b, h
   05C6 0A                 1281 	ld	a, (bc)
   05C7 CB EF              1282 	set	5, a
   05C9 02                 1283 	ld	(bc), a
                           1284 ;SpriteEnemy.c:139: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   05CA 21r01r00           1285 	ld	hl, #_THIS + 1
   05CD 2B                 1286 	dec	hl
   05CE 4E                 1287 	ld	c, (hl)
   05CF 23                 1288 	inc	hl
   05D0 46                 1289 	ld	b, (hl)
                           1290 ;SpriteEnemy.c:142: THIS->x -= 4;
   05D1 21 08 00           1291 	ld	hl, #0x0008
   05D4 09                 1292 	add	hl, bc
   05D5 7D                 1293 	ld	a, l
   05D6 54                 1294 	ld	d, h
   05D7 F8 06              1295 	ldhl	sp,	#6
   05D9 22                 1296 	ld	(hl+), a
   05DA 72                 1297 	ld	(hl), d
   05DB 2B                 1298 	dec	hl
   05DC 5E                 1299 	ld	e, (hl)
   05DD 23                 1300 	inc	hl
   05DE 56                 1301 	ld	d, (hl)
   05DF 1A                 1302 	ld	a,(de)
   05E0 4F                 1303 	ld	c, a
   05E1 13                 1304 	inc	de
   05E2 1A                 1305 	ld	a,(de)
   05E3 47                 1306 	ld	b, a
   05E4 79                 1307 	ld	a, c
   05E5 C6 FC              1308 	add	a, #0xfc
   05E7 4F                 1309 	ld	c, a
   05E8 78                 1310 	ld	a, b
   05E9 CE FF              1311 	adc	a, #0xff
   05EB 47                 1312 	ld	b, a
   05EC 2B                 1313 	dec	hl
   05ED 2A                 1314 	ld	a, (hl+)
   05EE 66                 1315 	ld	h, (hl)
   05EF 6F                 1316 	ld	l, a
   05F0 71                 1317 	ld	(hl), c
   05F1 23                 1318 	inc	hl
   05F2 70                 1319 	ld	(hl), b
                           1320 ;SpriteEnemy.c:143: data->wait = 48u;
   05F3 F8 04              1321 	ldhl	sp,	#4
   05F5 2A                 1322 	ld	a, (hl+)
   05F6 66                 1323 	ld	h, (hl)
   05F7 6F                 1324 	ld	l, a
   05F8 36 30              1325 	ld	(hl), #0x30
   05FA                    1326 00102$:
                           1327 ;SpriteEnemy.c:145: if (data->vx == -1){
   05FA F8 02              1328 	ldhl	sp,#(3 - 1)
   05FC 5E                 1329 	ld	e, (hl)
   05FD 23                 1330 	inc	hl
   05FE 56                 1331 	ld	d, (hl)
   05FF 1A                 1332 	ld	a,(de)
   0600 3C                 1333 	inc	a
   0601 C2r41r06           1334 	jp	NZ,00104$
                           1335 ;SpriteEnemy.c:139: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0604 21r01r00           1336 	ld	hl, #_THIS + 1
   0607 2B                 1337 	dec	hl
   0608 4E                 1338 	ld	c, (hl)
   0609 23                 1339 	inc	hl
   060A 46                 1340 	ld	b, (hl)
                           1341 ;SpriteEnemy.c:141: SPRITE_SET_VMIRROR(THIS);
   060B 21 0C 00           1342 	ld	hl, #0x000c
   060E 09                 1343 	add	hl, bc
   060F 4D                 1344 	ld	c, l
   0610 44                 1345 	ld	b, h
                           1346 ;SpriteEnemy.c:146: SPRITE_UNSET_VMIRROR(THIS);
   0611 0A                 1347 	ld	a, (bc)
   0612 CB AF              1348 	res	5, a
   0614 02                 1349 	ld	(bc), a
                           1350 ;SpriteEnemy.c:139: struct EnemyInfo* data = (struct EnemyInfo*)THIS->custom_data;
   0615 21r01r00           1351 	ld	hl, #_THIS + 1
   0618 2B                 1352 	dec	hl
   0619 4E                 1353 	ld	c, (hl)
   061A 23                 1354 	inc	hl
   061B 46                 1355 	ld	b, (hl)
                           1356 ;SpriteEnemy.c:142: THIS->x -= 4;
   061C 21 08 00           1357 	ld	hl, #0x0008
   061F 09                 1358 	add	hl, bc
   0620 7D                 1359 	ld	a, l
   0621 54                 1360 	ld	d, h
   0622 F8 06              1361 	ldhl	sp,	#6
   0624 22                 1362 	ld	(hl+), a
   0625 72                 1363 	ld	(hl), d
                           1364 ;SpriteEnemy.c:147: THIS->x += 4;
   0626 2B                 1365 	dec	hl
   0627 5E                 1366 	ld	e, (hl)
   0628 23                 1367 	inc	hl
   0629 56                 1368 	ld	d, (hl)
   062A 1A                 1369 	ld	a,(de)
   062B 4F                 1370 	ld	c, a
   062C 13                 1371 	inc	de
   062D 1A                 1372 	ld	a,(de)
   062E 47                 1373 	ld	b, a
   062F 03                 1374 	inc	bc
   0630 03                 1375 	inc	bc
   0631 03                 1376 	inc	bc
   0632 03                 1377 	inc	bc
   0633 2B                 1378 	dec	hl
   0634 2A                 1379 	ld	a, (hl+)
   0635 66                 1380 	ld	h, (hl)
   0636 6F                 1381 	ld	l, a
   0637 71                 1382 	ld	(hl), c
   0638 23                 1383 	inc	hl
   0639 70                 1384 	ld	(hl), b
                           1385 ;SpriteEnemy.c:148: data->wait = 48u;			
   063A F8 04              1386 	ldhl	sp,	#4
   063C 2A                 1387 	ld	a, (hl+)
   063D 66                 1388 	ld	h, (hl)
   063E 6F                 1389 	ld	l, a
   063F 36 30              1390 	ld	(hl), #0x30
   0641                    1391 00104$:
                           1392 ;SpriteEnemy.c:150: data->vx = -data->vx;
   0641 F8 02              1393 	ldhl	sp,#(3 - 1)
   0643 5E                 1394 	ld	e, (hl)
   0644 23                 1395 	inc	hl
   0645 56                 1396 	ld	d, (hl)
   0646 1A                 1397 	ld	a,(de)
   0647 4F                 1398 	ld	c, a
   0648 AF                 1399 	xor	a, a
   0649 91                 1400 	sub	a, c
   064A 4F                 1401 	ld	c, a
   064B 2B                 1402 	dec	hl
   064C 2A                 1403 	ld	a, (hl+)
   064D 66                 1404 	ld	h, (hl)
   064E 6F                 1405 	ld	l, a
   064F 71                 1406 	ld	(hl), c
                           1407 ;SpriteEnemy.c:151: if(THIS->type == SpritePorcupine){
   0650 21r01r00           1408 	ld	hl, #_THIS + 1
   0653 2B                 1409 	dec	hl
   0654 4E                 1410 	ld	c, (hl)
   0655 23                 1411 	inc	hl
   0656 46                 1412 	ld	b, (hl)
   0657 21 11 00           1413 	ld	hl, #0x0011
   065A 09                 1414 	add	hl, bc
   065B 4D                 1415 	ld	c, l
   065C 44                 1416 	ld	b, h
   065D 0A                 1417 	ld	a, (bc)
   065E D6 08              1418 	sub	a, #0x08
   0660 20 11              1419 	jr	NZ,00107$
                           1420 ;SpriteEnemy.c:152: data->enemy_state = ENEMY_STATE_ATTACK;
   0662 C1                 1421 	pop	bc
   0663 C5                 1422 	push	bc
   0664 03                 1423 	inc	bc
   0665 03                 1424 	inc	bc
   0666 3E 04              1425 	ld	a, #0x04
   0668 02                 1426 	ld	(bc), a
                           1427 ;SpriteEnemy.c:153: data->wait = attack_wait;
   0669 F8 04              1428 	ldhl	sp,#(5 - 1)
   066B 5E                 1429 	ld	e, (hl)
   066C 23                 1430 	inc	hl
   066D 56                 1431 	ld	d, (hl)
   066E 21r01r00           1432 	ld	hl, #_attack_wait
   0671 7E                 1433 	ld	a, (hl)
   0672 12                 1434 	ld	(de), a
   0673                    1435 00107$:
                           1436 ;SpriteEnemy.c:156: }
   0673 E8 08              1437 	add	sp, #8
   0675 C9                 1438 	ret
                           1439 ;SpriteEnemy.c:158: void Destroy_SpriteEnemy() {
                           1440 ;	---------------------------------
                           1441 ; Function Destroy_SpriteEnemy
                           1442 ; ---------------------------------
   0676                    1443 _Destroy_SpriteEnemy::
                           1444 ;SpriteEnemy.c:159: }
   0676 C9                 1445 	ret
                           1446 	.area _CODE_2
                           1447 	.area _CABS (ABS)
