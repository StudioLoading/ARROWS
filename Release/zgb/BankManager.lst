                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module BankManager
                              6 	.optsdcc -mgbz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _bank_stack
                             12 	.globl _bank_stackSTACK
                             13 	.globl _PushBank
                             14 	.globl _PopBank
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
   0000                      22 _bank_stackSTACK::
   0000                      23 	.ds 10
   000A                      24 _bank_stack::
   000A                      25 	.ds 2
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;C:/GB/ZGB/common/src/BankManager.c:3: DECLARE_STACK(bank_stack, N_PUSH_BANKS);
   0000 21r0Ar00             38 	ld	hl, #_bank_stack
   0003 36rFF                39 	ld	(hl), #<((_bank_stackSTACK - 0x0001))
   0005 23                   40 	inc	hl
   0006 36sFF                41 	ld	(hl), #>((_bank_stackSTACK - 0x0001))
                             42 ;--------------------------------------------------------
                             43 ; Home
                             44 ;--------------------------------------------------------
                             45 	.area _HOME
                             46 	.area _HOME
                             47 ;--------------------------------------------------------
                             48 ; code
                             49 ;--------------------------------------------------------
                             50 	.area _CODE
                             51 ;C:/GB/ZGB/common/src/BankManager.c:7: void PushBank(UINT8 b) {
                             52 ;	---------------------------------
                             53 ; Function PushBank
                             54 ; ---------------------------------
   0000                      55 _PushBank::
                             56 ;C:/GB/ZGB/common/src/BankManager.c:25: __endasm;
   0000 21r0Ar00             57 	ld	hl, #_bank_stack
   0003 34                   58 	inc	(hl)
   0004 4E                   59 	ld	c, (hl)
   0005 23                   60 	inc	hl
   0006 46                   61 	ld	b, (hl)
   0007 FAr00r00             62 	ld	a, (#__current_bank)
   000A 02                   63 	ld	(bc), a
   000B F8 02                64 	ldhl	sp, #2
   000D 7E                   65 	ld	a, (hl)
   000E EAr00r00             66 	ld	(#__current_bank), a
   0011 EA 00 20             67 	ld	(#0x2000), a
                             68 ;C:/GB/ZGB/common/src/BankManager.c:26: }
   0014 C9                   69 	ret
                             70 ;C:/GB/ZGB/common/src/BankManager.c:28: void PopBank() {
                             71 ;	---------------------------------
                             72 ; Function PopBank
                             73 ; ---------------------------------
   0015                      74 _PopBank::
                             75 ;C:/GB/ZGB/common/src/BankManager.c:42: __endasm;
   0015 21r0Ar00             76 	ld	hl, #_bank_stack
   0018 4E                   77 	ld	c, (hl)
   0019 23                   78 	inc	hl
   001A 46                   79 	ld	b, (hl)
   001B 0A                   80 	ld	a, (bc)
   001C EAr00r00             81 	ld	(#__current_bank), a
   001F EA 00 20             82 	ld	(#0x2000), a
   0022 2B                   83 	dec	hl
   0023 35                   84 	dec	(hl)
                             85 ;C:/GB/ZGB/common/src/BankManager.c:43: }
   0024 C9                   86 	ret
                             87 	.area _CODE
                             88 	.area _CABS (ABS)
